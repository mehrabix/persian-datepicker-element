{"version":3,"file":"persian-datepicker-element.js","sources":["webpack://PersianDatePickerElement/./src/persian-date.ts","webpack://PersianDatePickerElement/./src/utils/hijri-utils.ts","webpack://PersianDatePickerElement/./src/utils/event-utils.ts","webpack://PersianDatePickerElement/./src/persian-datepicker-element.ts","webpack://PersianDatePickerElement/./src/index.ts"],"sourcesContent":["/**\r\n * Jalali (Shamsi) Calendar utilities\r\n */\r\nexport const PersianDate = {\r\n  g_days_in_month: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\r\n  j_days_in_month: [31, 31, 31, 31, 31, 31, 30, 30, 30, 30, 30, 29],\r\n  \r\n  jalaliToGregorian: function(j_y: number, j_m: number, j_d: number): [number, number, number] {\r\n    j_y = parseInt(j_y.toString());\r\n    j_m = parseInt(j_m.toString());\r\n    j_d = parseInt(j_d.toString());\r\n    \r\n    const jy = j_y - 979;\r\n    const jm = j_m - 1;\r\n    const jd = j_d - 1;\r\n    \r\n    let j_day_no = 365 * jy + Math.floor(jy / 33) * 8 + Math.floor((jy % 33 + 3) / 4);\r\n    for (let i = 0; i < jm; ++i) j_day_no += this.j_days_in_month[i];\r\n    \r\n    j_day_no += jd;\r\n    \r\n    let g_day_no = j_day_no + 79;\r\n    \r\n    let gy = 1600 + 400 * Math.floor(g_day_no / 146097);\r\n    g_day_no = g_day_no % 146097;\r\n    \r\n    let leap = true;\r\n    if (g_day_no >= 36525) {\r\n      g_day_no--;\r\n      gy += 100 * Math.floor(g_day_no / 36524);\r\n      g_day_no = g_day_no % 36524;\r\n      \r\n      if (g_day_no >= 365) g_day_no++;\r\n      else leap = false;\r\n    }\r\n    \r\n    gy += 4 * Math.floor(g_day_no / 1461);\r\n    g_day_no %= 1461;\r\n    \r\n    if (g_day_no >= 366) {\r\n      leap = false;\r\n      g_day_no--;\r\n      gy += Math.floor(g_day_no / 365);\r\n      g_day_no = g_day_no % 365;\r\n    }\r\n    \r\n    let i = 0;\r\n    for (; g_day_no >= this.g_days_in_month[i] + (i === 1 && leap ? 1 : 0); i++) {\r\n      g_day_no -= this.g_days_in_month[i] + (i === 1 && leap ? 1 : 0);\r\n    }\r\n      \r\n    const gm = i + 1;\r\n    const gd = g_day_no + 1;\r\n    \r\n    return [gy, gm, gd];\r\n  },\r\n  \r\n  gregorianToJalali: function(g_y: number, g_m: number, g_d: number): [number, number, number] {\r\n    g_y = parseInt(g_y.toString());\r\n    g_m = parseInt(g_m.toString());\r\n    g_d = parseInt(g_d.toString());\r\n    \r\n    const gy = g_y - 1600;\r\n    const gm = g_m - 1;\r\n    const gd = g_d - 1;\r\n    \r\n    let g_day_no = 365 * gy + Math.floor((gy + 3) / 4) - Math.floor((gy + 99) / 100) + Math.floor((gy + 399) / 400);\r\n    \r\n    for (let i = 0; i < gm; ++i)\r\n      g_day_no += this.g_days_in_month[i];\r\n      \r\n    if (gm > 1 && ((gy % 4 === 0 && gy % 100 !== 0) || (gy % 400 === 0)))\r\n      g_day_no++;\r\n      \r\n    g_day_no += gd;\r\n    \r\n    let j_day_no = g_day_no - 79;\r\n    const j_np = Math.floor(j_day_no / 12053);\r\n    j_day_no = j_day_no % 12053;\r\n    \r\n    let jy = 979 + 33 * j_np + 4 * Math.floor(j_day_no / 1461);\r\n    \r\n    j_day_no %= 1461;\r\n    \r\n    if (j_day_no >= 366) {\r\n      jy += Math.floor((j_day_no - 1) / 365);\r\n      j_day_no = (j_day_no - 1) % 365;\r\n    }\r\n    \r\n    let i = 0;\r\n    for (; i < 11 && j_day_no >= this.j_days_in_month[i]; ++i) {\r\n      j_day_no -= this.j_days_in_month[i];\r\n    }\r\n    \r\n    const jm = i + 1;\r\n    const jd = j_day_no + 1;\r\n    \r\n    return [jy, jm, jd];\r\n  },\r\n  \r\n  isLeapJalaliYear: function(year: number): boolean {\r\n    const breaks = [1, 5, 9, 13, 17, 22, 26, 30];\r\n    return breaks.includes(year % 33);\r\n  },\r\n  \r\n  getDaysInMonth: function(year: number, month: number): number {\r\n    if (month < 1 || month > 12) return 0;\r\n    if (month <= 6) return 31;\r\n    if (month <= 11) return 30;\r\n    // Month 12 (Esfand)\r\n    return this.isLeapJalaliYear(year) ? 30 : 29;\r\n  },\r\n  \r\n  getMonthName: function(month: number): string {\r\n    const monthNames = [\r\n      \"فروردین\", \"اردیبهشت\", \"خرداد\", \"تیر\", \"مرداد\", \"شهریور\",\r\n      \"مهر\", \"آبان\", \"آذر\", \"دی\", \"بهمن\", \"اسفند\"\r\n    ];\r\n    return monthNames[month - 1];\r\n  },\r\n  \r\n  getDayOfWeek: function(jYear: number, jMonth: number, jDay: number): number {\r\n    const gdate = this.jalaliToGregorian(jYear, jMonth, jDay);\r\n    const date = new Date(gdate[0], gdate[1]-1, gdate[2]);\r\n    return date.getDay();\r\n  },\r\n  \r\n  /**\r\n   * Returns the number of days in a Jalali year\r\n   */\r\n  getDaysInYear: function(year: number): number {\r\n    return this.isLeapJalaliYear(year) ? 366 : 365;\r\n  },\r\n  \r\n  /**\r\n   * Validates a Jalali date\r\n   */\r\n  isValidDate: function(year: number, month: number, day: number): boolean {\r\n    if (year < 0 || month < 1 || month > 12 || day < 1) return false;\r\n    return day <= this.getDaysInMonth(year, month);\r\n  }\r\n}; ","/**\r\n * Utilities for converting between Hijri (Islamic) and Jalali (Persian) calendars\r\n * \r\n * This implementation uses the Umm al-Qura calendar system which is used in many\r\n * Islamic countries and is accurate for contemporary dates\r\n */\r\n\r\n/**\r\n * Converts Hijri date to Gregorian date\r\n * \r\n * @param hy Hijri year\r\n * @param hm Hijri month (1-12)\r\n * @param hd Hijri day (1-30)\r\n * @returns Array [year, month, day] with Gregorian date\r\n */\r\nexport function hijriToGregorian(hy: number, hm: number, hd: number): [number, number, number] {\r\n  // Ensure valid input\r\n  if (hm < 1 || hm > 12 || hd < 1 || hd > 30) {\r\n    throw new Error('Invalid Hijri date');\r\n  }\r\n  \r\n  // Days since Hijri epoch (approximately July 19, 622 CE)\r\n  // Algorithm based on Umm al-Qura calendar used in Saudi Arabia\r\n  \r\n  // Convert Hijri to days since Hijri epoch\r\n  const epochDays = Math.floor((hy - 1) * 354.367) + // Average Hijri year is 354.367 days\r\n                    Math.floor((hm - 1) * 29.5) + // Average Hijri month is 29.5 days\r\n                    (hd - 1);\r\n  \r\n  // Convert to Gregorian date (Julian days + days since Hijri epoch + Gregorian epoch adjustment)\r\n  const julianDays = epochDays + 1948439.5; // Adjustment for Hijri epoch in Julian days\r\n  \r\n  // Convert Julian days to Gregorian date\r\n  return julianDaysToGregorian(julianDays);\r\n}\r\n\r\n/**\r\n * Converts Julian days to Gregorian date\r\n * \r\n * @param julianDays Julian day count\r\n * @returns Array [year, month, day] with Gregorian date\r\n */\r\nfunction julianDaysToGregorian(julianDays: number): [number, number, number] {\r\n  const z = Math.floor(julianDays + 0.5);\r\n  const a = Math.floor((z - 1867216.25) / 36524.25);\r\n  const b = z + 1 + a - Math.floor(a / 4);\r\n  const c = b + 1524;\r\n  const d = Math.floor((c - 122.1) / 365.25);\r\n  const e = Math.floor(365.25 * d);\r\n  const f = Math.floor((c - e) / 30.6001);\r\n  \r\n  // Calculate day, month, and year\r\n  const day = Math.floor(c - e - Math.floor(30.6001 * f));\r\n  let month = f - 1 - 12 * Math.floor(f / 14);\r\n  let year = d - 4715 - Math.floor((7 + month) / 10);\r\n  \r\n  // Convert to 1-based month\r\n  if (month < 1) {\r\n    month += 12;\r\n    year -= 1;\r\n  }\r\n  \r\n  return [year, month, day];\r\n}\r\n\r\n/**\r\n * Converts Gregorian date to Jalali (Persian) date\r\n * \r\n * @param gy Gregorian year\r\n * @param gm Gregorian month (1-12)\r\n * @param gd Gregorian day (1-31)\r\n * @returns Array [year, month, day] with Jalali date\r\n */\r\nexport function gregorianToJalali(gy: number, gm: number, gd: number): [number, number, number] {\r\n  // Implementation based on jalali.js algorithm\r\n  const g_days_in_month = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\r\n  const j_days_in_month = [31, 31, 31, 31, 31, 31, 30, 30, 30, 30, 30, 29];\r\n  \r\n  gy = parseInt(gy.toString());\r\n  gm = parseInt(gm.toString());\r\n  gd = parseInt(gd.toString());\r\n  \r\n  // Check if year is leap year and adjust February days\r\n  const isLeapYear = (gy % 4 === 0 && gy % 100 !== 0) || (gy % 400 === 0);\r\n  g_days_in_month[1] = isLeapYear ? 29 : 28;\r\n  \r\n  // Convert to days since Gregorian epoch\r\n  let dayOfYear = gd;\r\n  for (let i = 0; i < gm - 1; i++) {\r\n    dayOfYear += g_days_in_month[i];\r\n  }\r\n  \r\n  // Calculate Julian day number\r\n  const jdn = Math.floor((gy + Math.floor((gm - 8) / 6) + 100100) * 1461 / 4)\r\n            + Math.floor(((gm + 9) % 12 + 1) * 153 / 5)\r\n            + gd - 34840408;\r\n  const d = jdn % 1461;\r\n  const jy = Math.floor(jdn / 1461) - 2820 + 474;\r\n  \r\n  // Calculate Jalali year\r\n  const jYear = jy;\r\n  \r\n  // Calculate Jalali month and day\r\n  let dayOfYearJalali = d;\r\n  if (dayOfYearJalali >= 366) {\r\n    dayOfYearJalali -= 366;\r\n    const yearsToAdd = Math.floor(dayOfYearJalali / 365);\r\n    dayOfYearJalali %= 365;\r\n  }\r\n  \r\n  let jMonth = 0;\r\n  let jDay = dayOfYearJalali;\r\n  \r\n  // Find month and day\r\n  while (jDay >= j_days_in_month[jMonth]) {\r\n    jDay -= j_days_in_month[jMonth];\r\n    jMonth++;\r\n  }\r\n  \r\n  return [jYear, jMonth + 1, jDay + 1];\r\n}\r\n\r\n/**\r\n * Converts Hijri date to Jalali date\r\n * \r\n * @param hy Hijri year\r\n * @param hm Hijri month (1-12)\r\n * @param hd Hijri day (1-30)\r\n * @returns Array [year, month, day] with Jalali date\r\n */\r\nexport function hijriToJalali(hy: number, hm: number, hd: number): [number, number, number] {\r\n  // First convert to Gregorian\r\n  const [gy, gm, gd] = hijriToGregorian(hy, hm, hd);\r\n  \r\n  // Then convert to Jalali\r\n  return gregorianToJalali(gy, gm, gd);\r\n}\r\n\r\n/**\r\n * Calculates Jalali date for a Hijri event in the current Persian year\r\n * \r\n * @param currentPersianYear Current Jalali/Persian year\r\n * @param hijriMonth Hijri month (1-12)\r\n * @param hijriDay Hijri day (1-30)\r\n * @returns Array [month, day] with Jalali date or null if the event doesn't occur in the current year\r\n */\r\nexport function getHijriEventDateInJalaliYear(currentPersianYear: number, hijriMonth: number, hijriDay: number): [number, number] | null {\r\n  // Get current date\r\n  const today = new Date();\r\n  \r\n  // Approximate current Hijri year (this is rough approximation, might be off by 1 year)\r\n  const currentHijriYear = Math.floor(currentPersianYear - 621.5 + 0.74 * (currentPersianYear - 621.5)) - 202;\r\n  \r\n  // Try current and next Hijri year (sometimes events span across Persian years)\r\n  for (let yearOffset = 0; yearOffset <= 1; yearOffset++) {\r\n    try {\r\n      const hijriYear = currentHijriYear + yearOffset;\r\n      \r\n      // Get Jalali date for this Hijri event\r\n      const [jYear, jMonth, jDay] = hijriToJalali(hijriYear, hijriMonth, hijriDay);\r\n      \r\n      // Check if the event falls in the requested Persian year\r\n      if (jYear === currentPersianYear) {\r\n        return [jMonth, jDay];\r\n      }\r\n    } catch (error) {\r\n      // Skip any conversion errors and continue\r\n      console.warn(`Error converting Hijri date (${currentHijriYear}, ${hijriMonth}, ${hijriDay})`, error);\r\n    }\r\n  }\r\n  \r\n  // Event doesn't occur in the current Persian year\r\n  return null;\r\n}\r\n\r\n/**\r\n * Gets the estimated Hijri date (Islamic date) for today\r\n * \r\n * @returns An array of [year, month, day] for today's Hijri date\r\n */\r\nexport function getCurrentHijriDate(): [number, number, number] {\r\n  // Get today's Gregorian date\r\n  const today = new Date();\r\n  const gyear = today.getFullYear();\r\n  const gmonth = today.getMonth() + 1;\r\n  const gday = today.getDate();\r\n  \r\n  // Use approximate calculation based on mathematical estimation\r\n  // (This isn't perfectly accurate but works for most contemporary dates)\r\n  \r\n  // Julian date calculation\r\n  const jd = (1461 * (gyear + 4800 + (gmonth - 14) / 12)) / 4 +\r\n           (367 * (gmonth - 2 - 12 * ((gmonth - 14) / 12))) / 12 -\r\n           (3 * ((gyear + 4900 + (gmonth - 14) / 12) / 100)) / 4 +\r\n           gday - 32075;\r\n           \r\n  // Hijri date calculation\r\n  const l = Math.floor(jd) - 1948440 + 10632;\r\n  const n = Math.floor((l - 1) / 10631);\r\n  const l1 = l - 10631 * n + 354;\r\n  const j = (Math.floor((10985 - l1) / 5316)) * (Math.floor((50 * l1) / 17719)) + \r\n           (Math.floor(l1 / 5670)) * (Math.floor((43 * l1) / 15238));\r\n  const l2 = l1 - (Math.floor((30 - j) / 15)) * (Math.floor((17719 * j) / 50)) - \r\n           (Math.floor(j / 16)) * (Math.floor((15238 * j) / 43)) + 29;\r\n           \r\n  const hmonth = Math.floor((24 * l2) / 709);\r\n  const hday = l2 - Math.floor((709 * hmonth) / 24);\r\n  const hyear = 30 * n + j - 30;\r\n  \r\n  return [hyear, hmonth, hday];\r\n}\r\n\r\nexport default {\r\n  hijriToGregorian,\r\n  gregorianToJalali,\r\n  hijriToJalali,\r\n  getHijriEventDateInJalaliYear,\r\n  getCurrentHijriDate\r\n}; ","import { PersianEvent } from '../types';\n// Import the original JSON file from the Persian Calendar repo\nimport persianCalendarData from '../data/persian-calendar-repo/PersianCalendar/data/events.json';\n// Import the Hijri utilities for date conversion\nimport HijriUtils from './hijri-utils';\nimport { PersianDate } from '../persian-date';\n\n// Fallback events in case JSON loading fails\nconst fallbackEvents: PersianEvent[] = [\n  { title: 'عید نوروز', month: 1, day: 1, type: 'Iran', holiday: true },\n  { title: 'روز طبیعت', month: 1, day: 13, type: 'Iran', holiday: true },\n  { title: 'عید فطر', month: 4, day: 5, type: 'Religious', holiday: true },\n  { title: 'عید قربان', month: 6, day: 10, type: 'Religious', holiday: true },\n  { title: 'تاسوعا', month: 7, day: 9, type: 'Religious', holiday: true },\n  { title: 'عاشورا', month: 7, day: 10, type: 'Religious', holiday: true },\n];\n\n/**\n * Maps events from the Persian Calendar repo format to our PersianEvent format\n */\nfunction mapPersianCalendarEvents(): PersianEvent[] {\n  try {\n    let allEvents: PersianEvent[] = [];\n    \n    // Process Persian Calendar events\n    if (persianCalendarData && Array.isArray(persianCalendarData[\"Persian Calendar\"])) {\n      const persianEvents = persianCalendarData[\"Persian Calendar\"].map((event: any) => ({\n        title: event.title,\n        month: event.month,\n        day: event.day,\n        type: event.type,\n        holiday: event.holiday\n      }));\n      \n      allEvents = [...persianEvents];\n    }\n    \n    // Process Hijri Calendar events - Convert them to current Jalali year\n    if (persianCalendarData && Array.isArray(persianCalendarData[\"Hijri Calendar\"])) {\n      // Get current Jalali year\n      const today = new Date();\n      const jalaliToday = PersianDate.gregorianToJalali(\n        today.getFullYear(),\n        today.getMonth() + 1,\n        today.getDate()\n      );\n      const currentJalaliYear = jalaliToday[0];\n      \n      // Process each Hijri event\n      const hijriEvents: PersianEvent[] = [];\n      \n      persianCalendarData[\"Hijri Calendar\"].forEach((event: any) => {\n        // Convert Hijri date to Jalali for current year\n        const jalaliDate = HijriUtils.getHijriEventDateInJalaliYear(\n          currentJalaliYear, \n          event.month, \n          event.day\n        );\n        \n        // Only add the event if it occurs in the current Jalali year\n        if (jalaliDate) {\n          const [jMonth, jDay] = jalaliDate;\n          \n          hijriEvents.push({\n            title: event.title,\n            month: jMonth,\n            day: jDay,\n            type: event.type,\n            holiday: event.holiday,\n            // Add original Hijri date for reference\n            originalHijriMonth: event.month,\n            originalHijriDay: event.day\n          });\n        }\n      });\n      \n      // Add converted Hijri events to all events\n      allEvents = [...allEvents, ...hijriEvents];\n    }\n    \n    if (allEvents.length === 0) {\n      console.warn('Persian Calendar data not found in expected format, using fallback events');\n      return fallbackEvents;\n    }\n    \n    return allEvents;\n  } catch (error) {\n    console.error('Error mapping Persian Calendar events:', error);\n    return fallbackEvents;\n  }\n}\n\n// Cache the mapped events to avoid reprocessing on every call\nconst mappedEvents = mapPersianCalendarEvents();\n\n/**\n * Event utilities for working with Persian calendar events\n */\nexport const EventUtils = {\n  /**\n   * Returns all Persian calendar events mapped from the original JSON data\n   * @param eventTypes Optional array of event types to filter by (e.g., ['Iran', 'Religious'])\n   * @param includeAllTypes If true, includes all event types regardless of filtering\n   */\n  getAllEvents(eventTypes?: string[], includeAllTypes: boolean = false): PersianEvent[] {\n    let filteredEvents = [...mappedEvents];\n    \n    // If specific event types are provided and we're not including all types, filter by those types\n    if (eventTypes && eventTypes.length > 0 && !includeAllTypes) {\n      filteredEvents = filteredEvents.filter(event => eventTypes.includes(event.type));\n    }\n    \n    return filteredEvents;\n  },\n\n  /**\n   * Returns all events for a given month and day\n   * @param month The month number (1-12)\n   * @param day The day number (1-31)\n   * @param eventTypes Optional array of event types to filter by (e.g., ['Iran', 'Religious'])\n   * @param includeAllTypes If true, includes all event types regardless of filtering\n   */\n  getEvents(month: number, day: number, eventTypes?: string[], includeAllTypes: boolean = false): PersianEvent[] {\n    const events = this.getAllEvents(eventTypes, includeAllTypes);\n    return events.filter(event => \n      event.month === month && \n      event.day === day\n    );\n  },\n\n  /**\n   * Checks if the specified date is a holiday\n   * @param month The month number (1-12)\n   * @param day The day number (1-31)\n   * @param eventTypes Optional array of event types to filter by (e.g., ['Iran', 'Religious'])\n   * @param includeAllTypes If true, includes all event types regardless of filtering\n   */\n  isHoliday(month: number, day: number, eventTypes?: string[], includeAllTypes: boolean = false): boolean {\n    const events = this.getEvents(month, day, eventTypes, includeAllTypes);\n    return events.some(event => event.holiday === true);\n  },\n\n  /**\n   * Gets holiday event titles for a specific date\n   * @param month The month number (1-12)\n   * @param day The day number (1-31)\n   * @param eventTypes Optional array of event types to filter by (e.g., ['Iran', 'Religious'])\n   * @param includeAllTypes If true, includes all event types regardless of filtering\n   */\n  getHolidayTitles(month: number, day: number, eventTypes?: string[], includeAllTypes: boolean = false): string[] {\n    const events = this.getEvents(month, day, eventTypes, includeAllTypes);\n    return events\n      .filter(event => event.holiday === true)\n      .map(event => event.title);\n  },\n\n  /**\n   * Gets all event titles for a specific date\n   * @param month The month number (1-12)\n   * @param day The day number (1-31)\n   * @param eventTypes Optional array of event types to filter by (e.g., ['Iran', 'Religious'])\n   * @param includeAllTypes If true, includes all event types regardless of filtering\n   */\n  getAllEventTitles(month: number, day: number, eventTypes?: string[], includeAllTypes: boolean = false): string[] {\n    const events = this.getEvents(month, day, eventTypes, includeAllTypes);\n    return events.map(event => event.title);\n  },\n  \n  /**\n   * Gets events of a specific type\n   * @param type The event type (e.g., 'Iran', 'Religious')\n   * @param includeAllTypes If true, includes all event types\n   * @param holidaysOnly If true, only returns holiday events\n   */\n  getEventsByType(type: string, includeAllTypes: boolean = false, holidaysOnly: boolean = false): PersianEvent[] {\n    const events = includeAllTypes \n      ? mappedEvents \n      : mappedEvents.filter(event => event.type === type);\n    \n    return holidaysOnly \n      ? events.filter(event => event.holiday === true) \n      : events;\n  },\n  \n  /**\n   * Get all holidays\n   * @param eventTypes Optional array of event types to filter by (e.g., ['Iran', 'Religious'])\n   * @param includeAllTypes If true, includes all event types regardless of filtering\n   */\n  getAllHolidays(eventTypes?: string[], includeAllTypes: boolean = false): PersianEvent[] {\n    const events = this.getAllEvents(eventTypes, includeAllTypes);\n    return events.filter(event => event.holiday === true);\n  },\n\n  /**\n   * Get available event types\n   */\n  getEventTypes(): string[] {\n    const types = new Set<string>();\n    mappedEvents.forEach(event => types.add(event.type));\n    return Array.from(types);\n  },\n\n  /**\n   * Get the source data metadata\n   */\n  getSourceMetadata(): { [key: string]: string } {\n    return persianCalendarData.Source || {};\n  },\n  \n  /**\n   * Refresh the events data to update Hijri calendar events for the current year\n   * This should be called when the component is initialized or the year changes\n   */\n  refreshEvents(): PersianEvent[] {\n    // Recalculate all events (especially Hijri events for current year)\n    const refreshedEvents = mapPersianCalendarEvents();\n    \n    // Replace the cached events with the new ones\n    while (mappedEvents.length > 0) {\n      mappedEvents.pop();\n    }\n    \n    refreshedEvents.forEach(event => mappedEvents.push(event));\n    \n    return [...mappedEvents];\n  }\n};\n\nexport default EventUtils; ","import { PersianDate } from './persian-date';\nimport { EventUtils } from './utils/event-utils';\nimport { \n  PersianDatePickerElementOptions, \n  PersianDateChangeEvent,\n  DateTuple\n} from './types';\n\n// Complete CSS style definition with all variables\nconst styles = `:host {\n  /* Color scheme */\n  --jdp-primary: #0891b2;\n  --jdp-primary-hover: #0e7490;\n  --jdp-primary-foreground: #ffffff;\n  \n  /* Neutral colors */\n  --jdp-background: #ffffff;\n  --jdp-foreground: #1e293b;\n  --jdp-muted: #f1f5f9;\n  --jdp-muted-foreground: #64748b;\n  --jdp-border: #e2e8f0;\n  --jdp-ring: #0284c7;\n  \n  /* Holiday colors */\n  --jdp-holiday-color: #ef4444;\n  --jdp-holiday-bg: #fee2e2;\n  --jdp-holiday-hover-bg: #fecaca;\n  \n  /* Typography */\n  --jdp-font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n  --jdp-font-size: 14px;\n  --jdp-line-height: 1.5;\n  --jdp-font-weight: 400;\n  --jdp-font-weight-medium: 500;\n  --jdp-day-name-font-size: 12px;\n  --jdp-day-name-font-weight: 400;\n  --jdp-day-font-size: 13px;\n  --jdp-day-font-weight: 400;\n  --jdp-month-year-font-size: 14px;\n  --jdp-month-year-font-weight: 500;\n  \n  /* Spacing */\n  --jdp-spacing-xs: 4px;\n  --jdp-spacing-sm: 8px;\n  --jdp-spacing-md: 16px;\n  --jdp-spacing-lg: 24px;\n  \n  /* Input field */\n  --jdp-input-padding-x: 14px;\n  --jdp-input-padding-y: 10px;\n  --jdp-input-border-width: 1px;\n  --jdp-input-border-color: var(--jdp-border);\n  --jdp-input-border-radius: var(--jdp-border-radius);\n  --jdp-input-focus-ring-width: 2px;\n  --jdp-input-focus-ring-color: rgba(2, 132, 199, 0.25);\n  \n  /* Calendar popup */\n  --jdp-calendar-width: 280px;\n  --jdp-calendar-padding: var(--jdp-spacing-md);\n  --jdp-calendar-border-width: 1px;\n  --jdp-calendar-border-color: var(--jdp-border);\n  --jdp-calendar-border-radius: var(--jdp-border-radius);\n  --jdp-calendar-shadow: 0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2);\n  --jdp-calendar-z-index: 10;\n  \n  /* Navigation buttons */\n  --jdp-nav-button-size: 30px;\n  --jdp-nav-button-bg: var(--jdp-muted);\n  --jdp-nav-button-bg-hover: var(--jdp-border);\n  --jdp-nav-button-border-radius: var(--jdp-border-radius);\n  --jdp-nav-arrow-size: 8px;\n  --jdp-nav-arrow-thickness: 2px;\n  --jdp-nav-arrow-color: var(--jdp-foreground);\n  \n  /* Day grid */\n  --jdp-day-cell-size: 32px;\n  --jdp-day-cell-margin: 1px;\n  --jdp-day-cell-border-radius: var(--jdp-border-radius);\n  \n  /* States */\n  --jdp-day-hover-bg: var(--jdp-muted);\n  --jdp-day-selected-bg: var(--jdp-primary);\n  --jdp-day-selected-color: var(--jdp-primary-foreground);\n  --jdp-day-today-border-color: var(--jdp-primary);\n  --jdp-day-today-border-width: 1px;\n  --jdp-day-disabled-opacity: 0.4;\n  \n  /* Animations */\n  --jdp-transition-duration: 0.2s;\n  --jdp-fade-from-y: -4px;\n  --jdp-fade-from-y-reverse: 4px;\n  --jdp-month-transition-duration: 0.3s;\n  \n  /* Layout */\n  --jdp-border-radius: 0.5rem;\n  --jdp-direction: rtl;\n  --jdp-header-gap: var(--jdp-spacing-xs);\n\n  /* Select boxes - default values that can be overridden */\n  --jdp-select-container-gap: var(--jdp-spacing-xs);\n  --jdp-select-trigger-height: var(--jdp-nav-button-size);\n  --jdp-select-trigger-bg: var(--jdp-muted);\n  \n  /* Scrollbar styling - thin and subtle */\n  --jdp-scrollbar-width: 4px;\n  --jdp-scrollbar-track: transparent;\n  --jdp-scrollbar-thumb: rgba(0, 0, 0, 0.15);\n  --jdp-scrollbar-thumb-hover: rgba(0, 0, 0, 0.25);\n  --jdp-scrollbar-border-radius: 4px;\n}\n\n* {\n  box-sizing: border-box;\n  direction: var(--jdp-direction);\n}\n\n.picker-container {\n  position: relative;\n  display: inline-block;\n  width: 100%;\n  font-family: var(--jdp-font-family);\n  font-size: var(--jdp-font-size);\n  line-height: var(--jdp-line-height);\n  font-weight: var(--jdp-font-weight);\n}\n\ninput {\n  width: 100%;\n  padding: var(--jdp-input-padding-y) var(--jdp-input-padding-x);\n  border-radius: var(--jdp-input-border-radius);\n  border: var(--jdp-input-border-width) solid var(--jdp-input-border-color);\n  font-size: var(--jdp-font-size);\n  line-height: var(--jdp-line-height);\n  font-family: inherit;\n  background-color: var(--jdp-background);\n  color: var(--jdp-foreground);\n  cursor: pointer;\n  outline: none;\n  transition: all var(--jdp-transition-duration) ease;\n  text-align: right;\n}\n\ninput:focus {\n  border-color: var(--jdp-ring);\n  box-shadow: 0 0 0 var(--jdp-input-focus-ring-width) var(--jdp-input-focus-ring-color);\n}\n\n.calendar {\n  display: none;\n  position: absolute;\n  right: 0;\n  width: var(--jdp-calendar-width);\n  background: var(--jdp-background);\n  border: var(--jdp-calendar-border-width) solid var(--jdp-calendar-border-color);\n  border-radius: var(--jdp-calendar-border-radius);\n  box-shadow: var(--jdp-calendar-shadow);\n  padding: var(--jdp-calendar-padding);\n  text-align: center;\n  z-index: var(--jdp-calendar-z-index);\n  touch-action: manipulation;\n  -webkit-user-select: none;\n  user-select: none;\n  transform: translateZ(0);\n  will-change: transform;\n  backface-visibility: hidden;\n  contain: layout style;\n}\n\n.calendar.position-bottom {\n  top: calc(100% + 5px);\n  animation: fadeInFromTop var(--jdp-transition-duration) ease;\n}\n\n.calendar.position-top {\n  bottom: calc(100% + 5px);\n  animation: fadeInFromBottom var(--jdp-transition-duration) ease;\n}\n\n.calendar.visible {\n  display: block;\n}\n\n@keyframes fadeInFromTop {\n  from { opacity: 0; transform: translateY(var(--jdp-fade-from-y)); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes fadeInFromBottom {\n  from { opacity: 0; transform: translateY(var(--jdp-fade-from-y-reverse)); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: var(--jdp-spacing-md);\n  gap: var(--jdp-header-gap, var(--jdp-spacing-xs));\n}\n\n.month-year {\n  font-weight: var(--jdp-month-year-font-weight);\n  font-size: var(--jdp-month-year-font-size);\n  color: var(--jdp-foreground);\n  transition: opacity var(--jdp-transition-duration) ease;\n}\n\n.month-year.fade {\n  opacity: 0;\n}\n\n.days-wrapper {\n  position: relative;\n  touch-action: pan-y;\n  overflow: visible;\n  z-index: 1;\n  contain: layout;\n  isolation: isolate;\n}\n\n.days {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  transition: transform var(--jdp-month-transition-duration) ease, opacity var(--jdp-month-transition-duration) ease;\n  will-change: transform, opacity;\n  transform: translateZ(0);\n  backface-visibility: hidden;\n  position: relative;\n  contain: layout;\n}\n\n.days.slide-left {\n  animation: slideInLeft var(--jdp-month-transition-duration) ease;\n}\n\n.days.slide-right {\n  animation: slideInRight var(--jdp-month-transition-duration) ease;\n}\n\n@keyframes slideInLeft {\n  from { \n    opacity: 0; \n    transform: translateX(-10%) translateZ(0);\n    pointer-events: none;\n  }\n  to { \n    opacity: 1; \n    transform: translateX(0) translateZ(0);\n    pointer-events: auto;\n  }\n}\n\n@keyframes slideInRight {\n  from { \n    opacity: 0; \n    transform: translateX(10%) translateZ(0); \n    pointer-events: none;\n  }\n  to { \n    opacity: 1; \n    transform: translateX(0) translateZ(0);\n    pointer-events: auto;\n  }\n}\n\n.day {\n  position: relative;\n  z-index: 1;\n  touch-action: manipulation;\n  isolation: isolate;\n}\n\n.day:hover {\n  z-index: 2;\n}\n\n.nav-button {\n  background: var(--jdp-nav-button-bg);\n  border: none;\n  border-radius: var(--jdp-nav-button-border-radius);\n  width: var(--jdp-nav-button-size);\n  height: var(--jdp-nav-button-size);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all var(--jdp-transition-duration) ease;\n  position: relative;\n  touch-action: manipulation;\n  will-change: transform, background-color;\n}\n\n.nav-button:hover {\n  background: var(--jdp-nav-button-bg-hover);\n}\n\n.nav-button:active {\n  transform: translateY(1px);\n}\n\n.nav-button::before {\n  content: '';\n  display: block;\n  width: var(--jdp-nav-arrow-size);\n  height: var(--jdp-nav-arrow-size);\n  border-top: var(--jdp-nav-arrow-thickness) solid var(--jdp-nav-arrow-color);\n  border-right: var(--jdp-nav-arrow-thickness) solid var(--jdp-nav-arrow-color);\n  position: absolute;\n}\n\n.nav-button.prev::before {\n  transform: rotate(45deg);\n  right: 11px;\n  left: auto;\n}\n\n.nav-button.next::before {\n  transform: rotate(225deg);\n  left: 11px;\n  right: auto;\n}\n\n.day-names {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  margin-bottom: var(--jdp-spacing-sm);\n}\n\n.day-name {\n  font-size: var(--jdp-day-name-font-size);\n  font-weight: var(--jdp-day-name-font-weight);\n  color: var(--jdp-muted-foreground);\n  padding: var(--jdp-spacing-xs) 0;\n  text-align: center;\n}\n\n.day {\n  aspect-ratio: 1/1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: var(--jdp-day-cell-border-radius);\n  font-size: var(--jdp-day-font-size);\n  font-weight: var(--jdp-day-font-weight);\n  cursor: pointer;\n  transition: var(--jdp-transition-duration) ease;\n  margin: var(--jdp-day-cell-margin);\n  position: relative;\n  touch-action: manipulation;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-user-select: none;\n  user-select: none;\n}\n\n.day:hover:not(.empty):not(.disabled) {\n  background: var(--jdp-day-hover-bg);\n}\n\n.day.selected {\n  background: var(--jdp-day-selected-bg);\n  color: var(--jdp-day-selected-color);\n}\n\n.day.today:not(.selected) {\n  border: var(--jdp-day-today-border-width) solid var(--jdp-day-today-border-color);\n}\n\n.day.empty {\n  cursor: default;\n}\n\n.day.disabled {\n  opacity: var(--jdp-day-disabled-opacity);\n  cursor: not-allowed;\n}\n\n/* Holiday styles */\n.day.holiday:not(.selected) {\n  color: var(--jdp-holiday-color);\n  background-color: var(--jdp-holiday-bg);\n  font-weight: var(--jdp-font-weight-medium);\n}\n\n.day.holiday:hover:not(.selected):not(.disabled) {\n  background-color: var(--jdp-holiday-hover-bg);\n}\n\n.day.friday {\n  color: var(--jdp-holiday-color);\n}\n\n.event-tooltip {\n  position: absolute;\n  background: var(--jdp-background);\n  border: 1px solid var(--jdp-border);\n  border-radius: var(--jdp-border-radius);\n  padding: var(--jdp-spacing-sm);\n  width: 200px;\n  box-shadow: var(--jdp-calendar-shadow);\n  text-align: right;\n  font-size: 12px;\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity var(--jdp-transition-duration) ease, visibility var(--jdp-transition-duration) ease;\n  pointer-events: none;\n  bottom: 120%;\n  right: 0;\n  transform: translateY(-5px);\n  z-index: 9999;\n}\n\n.event-tooltip.tooltip-visible {\n  opacity: 1;\n  visibility: visible;\n  pointer-events: auto;\n  background: var(--jdp-background);\n}\n\n/* Mobile-specific tooltip positioning */\n@media (max-width: 768px) {\n  .event-tooltip {\n    position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 90%;\n    max-width: 300px;\n    max-height: 80vh;\n    overflow-y: auto;\n    bottom: auto;\n    right: auto;\n    background: var(--jdp-background);\n    z-index: 9999;\n  }\n\n  .event-tooltip::before {\n    content: '';\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: -1;\n  }\n}\n\n.event-item {\n  margin-bottom: 4px;\n  padding-bottom: 4px;\n  border-bottom: 1px solid var(--jdp-border);\n  color: var(--jdp-foreground);\n  background: var(--jdp-background);\n}\n\n.event-item:last-child {\n  margin-bottom: 0;\n  padding-bottom: 0;\n  border-bottom: none;\n}\n\n.event-item.holiday {\n  color: var(--jdp-holiday-color);\n}\n\n.event-type-label {\n  display: inline-block;\n  font-size: 10px;\n  padding: 1px 4px;\n  border-radius: 3px;\n  margin-right: 4px;\n  background-color: var(--jdp-muted);\n  color: var(--jdp-muted-foreground);\n}\n\n/* Today button styling */\n.footer {\n  margin-top: var(--jdp-spacing-md);\n  display: flex;\n  justify-content: space-between;\n}\n\n.date-nav-button {\n  background: var(--jdp-muted);\n  border: none;\n  border-radius: var(--jdp-border-radius);\n  padding: var(--jdp-spacing-xs) var(--jdp-spacing-md);\n  font-family: inherit;\n  font-size: var(--jdp-font-size);\n  color: var(--jdp-foreground);\n  cursor: pointer;\n  transition: all var(--jdp-transition-duration) ease;\n  touch-action: manipulation;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.date-nav-button:hover {\n  background: var(--jdp-nav-button-bg-hover);\n}\n\n.date-nav-button:active {\n  transform: translateY(1px);\n}\n\n/* Month/Year selectors - scoped to the component */\n:host .selectors-container {\n  display: flex;\n  gap: var(--jdp-select-container-gap, var(--jdp-spacing-xs));\n  position: relative;\n  align-items: var(--jdp-select-container-align, center);\n  justify-content: var(--jdp-select-container-justify, space-between);\n  width: 100%;\n  max-width: calc(100% - var(--jdp-nav-button-size) * 2 - var(--jdp-spacing-md));\n  margin: 0 var(--jdp-spacing-xs);\n}\n\n:host .custom-select {\n  position: relative;\n  user-select: none;\n  width: 100%;\n}\n\n:host .select-trigger {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0 4px;\n  width: 100%;\n  height: var(--jdp-select-trigger-height, var(--jdp-nav-button-size));\n  min-height: var(--jdp-nav-button-size);\n  background-color: var(--jdp-select-trigger-bg, var(--jdp-muted));\n  border: var(--jdp-select-trigger-border-width, 1px) solid var(--jdp-select-trigger-border-color, var(--jdp-border));\n  border-radius: var(--jdp-select-trigger-border-radius, var(--jdp-border-radius));\n  color: var(--jdp-select-trigger-color, var(--jdp-foreground));\n  font-family: inherit;\n  font-size: var(--jdp-select-trigger-font-size, var(--jdp-font-size));\n  line-height: 1;\n  padding: 0 var(--jdp-select-trigger-padding-x, 0.75rem);\n  cursor: pointer;\n  transition: all var(--jdp-transition-duration) ease;\n  text-align: var(--jdp-select-trigger-text-align, center);\n  min-width: var(--jdp-select-trigger-min-width, initial);\n  outline: none;\n  font-weight: var(--jdp-select-trigger-font-weight, 500);\n  box-sizing: border-box;\n  max-width: 83px;\n}\n\n:host .select-trigger:hover {\n  background-color: var(--jdp-select-trigger-bg-hover, rgba(0, 0, 0, 0.05));\n  border-color: var(--jdp-select-trigger-border-hover, var(--jdp-border));\n}\n\n:host .select-trigger:focus-visible {\n  outline: 2px solid var(--jdp-select-trigger-focus-ring-color, var(--jdp-ring));\n  outline-offset: var(--jdp-select-trigger-focus-ring-offset, 2px);\n}\n\n:host .select-icon {\n  margin-left: var(--jdp-select-icon-margin, var(--jdp-spacing-xs));\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  transition: transform 0.2s ease;\n  width: var(--jdp-select-icon-size, 12px);\n  height: var(--jdp-select-icon-size, 12px);\n  opacity: var(--jdp-select-icon-opacity, 0.7);\n  flex-shrink: 0;\n}\n\n:host .select-icon svg {\n  width: var(--jdp-select-icon-size, 12px);\n  height: var(--jdp-select-icon-size, 12px);\n}\n\n:host .select-content.open .select-icon {\n  transform: rotate(180deg);\n}\n\n:host .select-content {\n  position: var(--jdp-select-content-position, absolute);\n  top: calc(100% + var(--jdp-select-content-top-offset, 5px));\n  left: 0;\n  width: 100%;\n  background-color: var(--jdp-select-content-bg, var(--jdp-background));\n  border: var(--jdp-select-content-border-width, 1px) solid var(--jdp-select-content-border-color, var(--jdp-border));\n  border-radius: var(--jdp-select-content-border-radius, var(--jdp-border-radius));\n  box-shadow: var(--jdp-select-content-shadow, 0 4px 8px rgba(0,0,0,0.1));\n  z-index: var(--jdp-select-content-z-index, 20);\n  overflow-y: auto;\n  max-height: var(--jdp-select-content-max-height, 200px);\n  display: none;\n  padding: var(--jdp-select-content-padding-y, 0.25rem) var(--jdp-select-content-padding-x, 0);\n  scroll-behavior: smooth;\n  \n  /* Custom scrollbar styling */\n  scrollbar-width: var(--jdp-scrollbar-width-size, none);\n  scrollbar-color: var(--jdp-scrollbar-thumb, rgba(0, 0, 0, 0.15)) var(--jdp-scrollbar-track, transparent);\n}\n\n/* Webkit-based browsers (Chrome, Safari, Edge) */\n:host .select-content::-webkit-scrollbar {\n  width: var(--jdp-scrollbar-width, 4px);\n}\n\n:host .select-content::-webkit-scrollbar-track {\n  background: var(--jdp-scrollbar-track, transparent);\n  border-radius: var(--jdp-scrollbar-border-radius, 4px);\n}\n\n:host .select-content::-webkit-scrollbar-thumb {\n  background-color: var(--jdp-scrollbar-thumb, rgba(0, 0, 0, 0.15));\n  border-radius: var(--jdp-scrollbar-border-radius, 4px);\n}\n\n:host .select-content::-webkit-scrollbar-thumb:hover {\n  background-color: var(--jdp-scrollbar-thumb-hover, rgba(0, 0, 0, 0.25));\n}\n\n:host .select-content.open {\n  display: block;\n  animation: fadeInSelect var(--jdp-select-content-animation-duration, var(--jdp-transition-duration)) ease;\n}\n\n:host .month-select-content {\n  width: var(--jdp-select-month-width, 100%);\n}\n\n:host .year-select-content {\n  width: var(--jdp-select-year-width, 100%);\n}\n\n:host .select-item {\n  padding: var(--jdp-select-item-padding-y, 0.5rem) var(--jdp-select-item-padding-x, 0.75rem);\n  cursor: pointer;\n  transition: background-color var(--jdp-transition-duration) ease;\n  text-align: var(--jdp-select-item-text-align, right);\n  border-radius: var(--jdp-select-item-border-radius, 0.25rem);\n  margin: var(--jdp-select-item-margin, 0 0.25rem);\n}\n\n:host .select-item:hover {\n  background-color: var(--jdp-select-item-hover-bg, var(--jdp-day-hover-bg));\n}\n\n:host .select-item.selected {\n  background-color: var(--jdp-select-item-selected-bg, var(--jdp-primary));\n  color: var(--jdp-select-item-selected-color, var(--jdp-primary-foreground));\n  font-weight: var(--jdp-select-item-selected-font-weight, var(--jdp-font-weight-medium));\n}\n\n@keyframes fadeInSelect {\n  from { opacity: 0; transform: translateY(-5px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n/* RTL specific styles */\n:host([rtl=\"true\"]) .select-icon,\n:host([dir=\"rtl\"]) .select-icon {\n  margin-left: 0;\n  margin-right: var(--jdp-select-icon-margin, var(--jdp-spacing-xs));\n}\n\n:host([rtl=\"true\"]) .select-item,\n:host([dir=\"rtl\"]) .select-item {\n  text-align: var(--jdp-select-item-text-align, right);\n}\n\n/* Dark mode support using CSS media query for scrollbar */\n@media (prefers-color-scheme: dark) {\n  :host {\n    --jdp-scrollbar-thumb: rgba(124, 124, 124, 0.15);\n    --jdp-scrollbar-thumb-hover: rgba(41, 41, 41, 0.25);\n  }\n}\n\n/* Allow manual dark mode toggle via class-based approach */\n:host(.dark-theme) {\n    --jdp-scrollbar-thumb: rgba(124, 124, 124, 0.15);\n    --jdp-scrollbar-thumb-hover: rgba(41, 41, 41, 0.25);\n}\n`;\n\n// Default holiday types\nconst DEFAULT_HOLIDAY_TYPES = ['Iran', 'Religious'];\n\n/**\n * Jalali Date Picker Web Component\n * \n * A customizable date picker that follows the Jalali (Persian) calendar.\n * Features include:\n * - Month and year dropdown navigation with 150-year range\n * - Quick today and tomorrow navigation buttons\n * - Touch gesture support for swiping between months\n * - Holiday highlighting with customizable types\n * - Full RTL support\n * - Customizable styling with global CSS variables\n * - Shadcn-like UI with ability to toggle visibility of UI elements\n * - Consistent UI sizing with properly aligned select boxes and buttons\n * \n * Usage:\n * ```html\n * <!-- Basic usage -->\n * <persian-datepicker-element></persian-datepicker-element>\n * \n * <!-- With attributes -->\n * <persian-datepicker-element placeholder=\"انتخاب تاریخ\" format=\"YYYY/MM/DD\"></persian-datepicker-element>\n * \n * <!-- With holiday types -->\n * <persian-datepicker-element holiday-types=\"Iran,Religious\"></persian-datepicker-element>\n * \n * <!-- With all holiday types -->\n * <persian-datepicker-element holiday-types=\"all\"></persian-datepicker-element>\n * \n * <!-- With custom Today button text -->\n * <persian-datepicker-element today-button-text=\"Go to Today\"></persian-datepicker-element>\n * \n * <!-- With custom Tomorrow button text -->\n * <persian-datepicker-element tomorrow-button-text=\"Next Day\"></persian-datepicker-element>\n * \n * <!-- With custom button styling -->\n * <persian-datepicker-element today-button-class=\"primary rounded\" tomorrow-button-class=\"secondary rounded\"></persian-datepicker-element>\n * \n * <!-- With styling customization -->\n * <persian-datepicker-element style=\"--jdp-primary: #3b82f6; --jdp-font-family: 'Vazir', sans-serif;\"></persian-datepicker-element>\n *\n * <!-- Hiding specific UI elements -->\n * <persian-datepicker-element \n *   show-prev-button=\"false\"\n *   show-next-button=\"false\"\n *   show-tomorrow-button=\"false\"\n * ></persian-datepicker-element>\n * ```\n * \n * @element persian-datepicker-element\n * \n * @attr {string} placeholder - Placeholder text for the input field\n * @attr {string} format - Date format (e.g., \"YYYY/MM/DD\")\n * @attr {boolean} rtl - Whether to use RTL direction\n * @attr {boolean} show-holidays - Whether to highlight holidays\n * @attr {string} holiday-types - Comma-separated list of holiday types to display\n * @attr {string} today-button-text - Custom text for the Today button (default: \"امروز\")\n * @attr {string} today-button-class - Additional CSS classes for the Today button\n * @attr {string} tomorrow-button-text - Custom text for the Tomorrow button (default: \"فردا\")\n * @attr {string} tomorrow-button-class - Additional CSS classes for the Tomorrow button\n * \n * @attr {boolean} show-month-selector - Whether to show the month selector (default: true)\n * @attr {boolean} show-year-selector - Whether to show the year selector (default: true)\n * @attr {boolean} show-prev-button - Whether to show the previous month button (default: true)\n * @attr {boolean} show-next-button - Whether to show the next month button (default: true)\n * @attr {boolean} show-today-button - Whether to show the Today button (default: true)\n * @attr {boolean} show-tomorrow-button - Whether to show the Tomorrow button (default: true)\n * \n * Styling:\n * The component can be styled using CSS variables. These can be set globally in your CSS\n * or directly on the element using the style attribute. See the component's CSS file\n * for the complete list of available CSS variables.\n */\nexport class PersianDatePickerElement extends HTMLElement {\n  // Private DOM elements\n  private input!: HTMLInputElement;\n  private calendar!: HTMLDivElement;\n  private daysContainer!: HTMLDivElement;\n  private dayNamesContainer!: HTMLDivElement;\n  \n  // Date state\n  private jalaliYear: number = 0;\n  private jalaliMonth: number = 0;\n  private jalaliDay: number = 0;\n  private selectedDate: DateTuple | null = null;\n  \n  // Configuration\n  private options: PersianDatePickerElementOptions;\n  private showHolidays: boolean = true;\n  private holidayTypes: string[] = [...DEFAULT_HOLIDAY_TYPES];\n  private includeAllTypes: boolean = false;\n  private isTransitioning: boolean = false;\n  private _documentClickHandler: EventListener = () => {};\n  \n  // Static property to track currently open calendar instance\n  private static openCalendarInstance: PersianDatePickerElement | null = null;\n  \n  // Persian month names - defined once to avoid recreation\n  private readonly persianMonths = [\n    \"فروردین\", \"اردیبهشت\", \"خرداد\", \"تیر\", \"مرداد\", \"شهریور\",\n    \"مهر\", \"آبان\", \"آذر\", \"دی\", \"بهمن\", \"اسفند\"\n  ];\n\n  static get observedAttributes() {\n    return [\n      'placeholder', \n      'rtl', \n      'format', \n      'show-holidays',\n      'holiday-types',\n      'today-button-text',\n      'today-button-class',\n      'tomorrow-button-text',\n      'tomorrow-button-class',\n      // UI visibility props\n      'show-month-selector',\n      'show-year-selector',\n      'show-prev-button',\n      'show-next-button',\n      'show-today-button',\n      'show-tomorrow-button'\n    ];\n  }\n\n  constructor(options: PersianDatePickerElementOptions = {}) {\n    super();\n    this.options = options;\n    \n    // Create shadow DOM and render initial structure\n    const shadow = this.attachShadow({ mode: \"open\" });\n    this.render(shadow);\n    \n    // Set holiday types if provided in options\n    if (options.holidayTypes) {\n      this.setHolidayTypes(options.holidayTypes);\n    }\n  }\n\n  connectedCallback() {\n    try {\n      if (!this.shadowRoot) {\n        console.error(\"Shadow root not available\");\n        return;\n      }\n\n      // Initialize DOM references\n      this.initializeDomReferences();\n      \n      // Initialize with today's date\n      this.initializeCurrentDate();\n      \n      // Setup initial UI components\n      this.initializeUIComponents();\n      \n      // Set up event listeners\n      this.addEventListeners();\n      \n      // Initialize touch gesture support\n      this.initTouchGestures();\n      \n      // Update the UI with the current date\n      this.renderCalendar();\n    } catch (error) {\n      console.error(\"Error in connectedCallback:\", error);\n    }\n  }\n\n  disconnectedCallback() {\n    // Clean up event listeners to prevent memory leaks\n    if (this._documentClickHandler) {\n      document.removeEventListener(\"click\", this._documentClickHandler);\n    }\n    \n    // Clean up the openCalendarInstance if this element is being removed\n    if (PersianDatePickerElement.openCalendarInstance === this) {\n      PersianDatePickerElement.openCalendarInstance = null;\n    }\n    \n    // Clean up any references that could cause memory leaks\n    const elements = [this.input, this.calendar, this.daysContainer, this.dayNamesContainer];\n    elements.forEach(element => {\n      if (element) {\n        const clone = element.cloneNode(false);\n        if (element.parentNode) {\n          element.parentNode.replaceChild(clone, element);\n        }\n      }\n    });\n  }\n\n  /**\n   * Handle attribute changes\n   */\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return;\n    \n    // Early return if element is not fully initialized\n    if (!this.shadowRoot) return;\n    \n    switch (name) {\n      case 'placeholder':\n        if (this.input) this.input.placeholder = newValue || '';\n        break;\n        \n      case 'rtl':\n        const rtl = newValue !== null && newValue !== 'false';\n        this.style.setProperty('--jdp-direction', rtl ? 'rtl' : 'ltr');\n        break;\n        \n      case 'show-holidays':\n        this.showHolidays = newValue !== null && newValue !== 'false';\n        if (this.calendar) {\n          this.renderCalendar();\n        }\n        break;\n        \n      case 'holiday-types':\n        if (newValue) {\n          this.setHolidayTypes(newValue);\n        } else {\n          this.holidayTypes = [...DEFAULT_HOLIDAY_TYPES];\n          this.includeAllTypes = false;\n        }\n        if (this.calendar) {\n          this.renderCalendar();\n        }\n        break;\n        \n      case 'today-button-text':\n      case 'tomorrow-button-text':\n        this.updateButtonText(name, newValue);\n        break;\n        \n      case 'today-button-class':\n      case 'tomorrow-button-class':\n        this.updateButtonClass(name, newValue);\n        break;\n        \n      // Visibility attributes that require re-rendering\n      case 'show-month-selector':\n      case 'show-year-selector':\n      case 'show-prev-button':\n      case 'show-next-button':\n      case 'show-today-button':\n      case 'show-tomorrow-button':\n        // Re-create the shadow DOM with updated visibility settings\n        if (this.shadowRoot) {\n          this.render(this.shadowRoot);\n          // Re-initialize after re-rendering\n          this.initializeDomReferences();\n          this.initializeUIComponents();\n          this.addEventListeners();\n          this.renderCalendar();\n        }\n        break;\n    }\n  }\n\n  /**\n   * Helper to update button text from attributes\n   */\n  private updateButtonText(attrName: string, newValue: string): void {\n    if (!this.shadowRoot) return;\n    \n    const buttonId = attrName === 'today-button-text' ? 'today-button' : 'tomorrow-button';\n    const defaultText = attrName === 'today-button-text' ? 'امروز' : 'فردا';\n    \n    const button = this.shadowRoot.getElementById(buttonId);\n    if (button) {\n      button.textContent = newValue || defaultText;\n    }\n  }\n\n  /**\n   * Helper to update button class from attributes\n   */\n  private updateButtonClass(attrName: string, newValue: string): void {\n    if (!this.shadowRoot) return;\n    \n    const buttonId = attrName === 'today-button-class' ? 'today-button' : 'tomorrow-button';\n    const baseClass = attrName === 'today-button-class' ? 'today-button' : 'tomorrow-button';\n    \n    const button = this.shadowRoot.getElementById(buttonId);\n    if (button) {\n      // Reset to base class\n      button.className = `date-nav-button ${baseClass}`;\n      \n      // Add new classes if provided\n      if (newValue) {\n        newValue.split(' ').forEach(className => {\n          if (className.trim()) {\n            button.classList.add(className.trim());\n          }\n        });\n      }\n    }\n  }\n\n  /**\n   * Initialize DOM references for the component\n   */\n  private initializeDomReferences(): void {\n    if (!this.shadowRoot) return;\n    \n    // Get required DOM elements\n    this.input = this.shadowRoot.getElementById(\"date-input\") as HTMLInputElement;\n    this.calendar = this.shadowRoot.getElementById(\"calendar\") as HTMLDivElement;\n    this.daysContainer = this.shadowRoot.getElementById(\"days-container\") as HTMLDivElement;\n    this.dayNamesContainer = this.shadowRoot.getElementById(\"day-names\") as HTMLDivElement;\n\n    if (!this.input || !this.calendar || !this.daysContainer || !this.dayNamesContainer) {\n      throw new Error(\"Failed to initialize required elements\");\n    }\n    \n    // Set placeholder if provided in options\n    if (this.options.placeholder) {\n      this.input.placeholder = this.options.placeholder;\n    } else {\n      // Apply placeholder from attribute if set\n      const placeholder = this.getAttribute('placeholder');\n      if (placeholder) {\n        this.input.placeholder = placeholder;\n      }\n    }\n  }\n\n  /**\n   * Initialize the current date to today's Jalali date\n   */\n  private initializeCurrentDate(): void {\n    const today = new Date();\n    const jalaliToday = PersianDate.gregorianToJalali(\n      today.getFullYear(),\n      today.getMonth() + 1,\n      today.getDate()\n    );\n\n    this.jalaliYear = jalaliToday[0];\n    this.jalaliMonth = jalaliToday[1];\n    this.jalaliDay = jalaliToday[2];\n    this.selectedDate = null;\n  }\n\n  /**\n   * Initialize UI components like day names and selectors\n   */\n  private initializeUIComponents(): void {\n    // Initialize day names\n    this.initializeDayNames();\n    \n    // Setup month and year selectors\n    this.setupMonthYearSelectors();\n    \n    // Refresh events for correct Jalali dates\n    EventUtils.refreshEvents();\n  }\n\n  /**\n   * Helper to initialize day names\n   */\n  private initializeDayNames(): void {\n    if (!this.dayNamesContainer) return;\n    \n    // Clear any existing content\n    this.dayNamesContainer.innerHTML = \"\";\n    \n    // Initialize the day names (Saturday to Friday in Persian)\n    const dayNames = [\"ش\", \"ی\", \"د\", \"س\", \"چ\", \"پ\", \"ج\"];\n    dayNames.forEach(name => {\n      const dayNameEl = document.createElement(\"div\");\n      dayNameEl.classList.add(\"day-name\");\n      dayNameEl.textContent = name;\n      this.dayNamesContainer.appendChild(dayNameEl);\n    });\n  }\n\n  /**\n   * Setup month and year selector dropdowns\n   */\n  private setupMonthYearSelectors(): void {\n    if (!this.shadowRoot) return;\n    \n    // Get elements\n    const monthSelectTrigger = this.shadowRoot.getElementById(\"month-select-trigger\") as HTMLButtonElement | null;\n    const yearSelectTrigger = this.shadowRoot.getElementById(\"year-select-trigger\") as HTMLButtonElement | null;\n    const monthSelectValue = this.shadowRoot.getElementById(\"month-select-value\") as HTMLSpanElement | null;\n    const yearSelectValue = this.shadowRoot.getElementById(\"year-select-value\") as HTMLSpanElement | null;\n    const monthSelectContent = this.shadowRoot.getElementById(\"month-select-content\") as HTMLDivElement | null;\n    const yearSelectContent = this.shadowRoot.getElementById(\"year-select-content\") as HTMLDivElement | null;\n    \n    // Exit early if any element is missing\n    if (!monthSelectTrigger || !yearSelectTrigger || !monthSelectValue || \n        !yearSelectValue || !monthSelectContent || !yearSelectContent) {\n      console.error(\"Failed to initialize month/year selectors\");\n      return;\n    }\n    \n    // Clear existing options\n    monthSelectContent.innerHTML = \"\";\n    yearSelectContent.innerHTML = \"\";\n    \n    // Setup month options\n    this.persianMonths.forEach((month, index) => {\n      const monthValue = index + 1;\n      const monthItem = document.createElement(\"div\");\n      monthItem.classList.add(\"select-item\");\n      monthItem.textContent = month;\n      monthItem.dataset.value = monthValue.toString();\n      \n      if (monthValue === this.jalaliMonth) {\n        monthItem.classList.add(\"selected\");\n        monthSelectValue.textContent = month;\n      }\n      \n      monthItem.addEventListener(\"click\", (e) => {\n        e.stopPropagation(); // Stop event propagation\n        this.handleMonthChange(monthValue, month);\n        this.closeAllDropdowns();\n      });\n      \n      monthSelectContent.appendChild(monthItem);\n    });\n    \n    // Setup year options\n    // Get current year range\n    const today = new Date();\n    const jalaliToday = PersianDate.gregorianToJalali(\n      today.getFullYear(), \n      today.getMonth() + 1, \n      today.getDate()\n    );\n    \n    const currentJalaliYear = jalaliToday[0];\n    const startYear = currentJalaliYear - 100;\n    const endYear = currentJalaliYear + 50;\n    \n    for (let year = startYear; year <= endYear; year++) {\n      const yearItem = document.createElement(\"div\");\n      yearItem.classList.add(\"select-item\");\n      yearItem.textContent = year.toString();\n      yearItem.dataset.value = year.toString();\n      \n      if (year === this.jalaliYear) {\n        yearItem.classList.add(\"selected\");\n        yearSelectValue.textContent = year.toString();\n      }\n      \n      yearItem.addEventListener(\"click\", (e) => {\n        e.stopPropagation(); // Stop event propagation\n        this.handleYearChange(year);\n        this.closeAllDropdowns();\n      });\n      \n      yearSelectContent.appendChild(yearItem);\n    }\n    \n    // Add toggle event listeners to triggers\n    monthSelectTrigger.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      this.toggleDropdown(monthSelectContent);\n    });\n    \n    yearSelectTrigger.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      this.toggleDropdown(yearSelectContent);\n    });\n    \n    // Prevent event bubbling from the content containers\n    monthSelectContent.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n    });\n    \n    yearSelectContent.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n    });\n  }\n\n  // Add all needed event listeners\n  private addEventListeners(): void {\n    if (!this.shadowRoot || !this.input || !this.calendar) return;\n    \n    // Input click event to toggle calendar\n    this.input.addEventListener(\"click\", this.handleInputClick);\n    \n    // Button event listeners\n    this.setupNavigationButtons();\n    \n    // Prevent clicks inside the calendar from bubbling up\n    this.calendar.addEventListener(\"click\", e => e.stopPropagation());\n    \n    // Close dropdowns when clicking on empty space in calendar\n    this.calendar.addEventListener(\"click\", e => {\n      const target = e.target as HTMLElement;\n      // If the click was not on a select-trigger element or select-content element, close all dropdowns\n      if (!target.closest('.select-trigger') && !target.closest('.select-content')) {\n        this.closeAllDropdowns();\n      }\n    });\n    \n    // Document click handler to close calendar when clicking outside\n    this._documentClickHandler = this.handleDocumentClick.bind(this);\n    document.addEventListener(\"click\", this._documentClickHandler);\n  }\n\n  /**\n   * Handle input field click\n   */\n  private handleInputClick = (e: MouseEvent): void => {\n    e.stopPropagation();\n    this.toggleCalendar();\n  }\n\n  /**\n   * Handle document clicks to close the calendar when clicking outside\n   */\n  private handleDocumentClick = (e: Event): void => {\n    if (!this.calendar || !this.calendar.classList.contains(\"visible\")) return;\n    \n    const path = e.composedPath();\n    if (!path.includes(this)) {\n      this.closeAllDropdowns();\n      this.toggleCalendar();\n    }\n  }\n\n  /**\n   * Setup navigation buttons (prev, next, today, tomorrow)\n   */\n  private setupNavigationButtons(): void {\n    if (!this.shadowRoot) return;\n    \n    const prevMonthBtn = this.shadowRoot.getElementById(\"prev-month\");\n    const nextMonthBtn = this.shadowRoot.getElementById(\"next-month\");\n    const todayBtn = this.shadowRoot.getElementById(\"today-button\");\n    const tomorrowBtn = this.shadowRoot.getElementById(\"tomorrow-button\");\n    \n    // Helper function to add click handler with stopPropagation\n    const addClickHandler = (element: HTMLElement | null, handler: () => void): void => {\n      if (element) {\n        element.addEventListener(\"click\", (e) => {\n          e.stopPropagation();\n          \n          // Close any open dropdowns when navigation buttons are clicked\n          this.closeAllDropdowns();\n          \n          handler();\n        });\n      }\n    };\n    \n    addClickHandler(prevMonthBtn, () => this.changeMonth(-1));\n    addClickHandler(nextMonthBtn, () => this.changeMonth(1));\n    addClickHandler(todayBtn, () => this.goToToday());\n    addClickHandler(tomorrowBtn, () => this.goToTomorrow());\n  }\n\n  /**\n   * Sets the holiday types to be displayed\n   */\n  setHolidayTypes(types: string | string[]): void {\n    if (typeof types === 'string') {\n      // Special case for \"all\" which includes all types\n      if (types.toLowerCase() === 'all') {\n        this.includeAllTypes = true;\n        this.holidayTypes = [...EventUtils.getEventTypes()]; // Get all available types\n        return;\n      }\n      \n      // Parse comma-separated values\n      this.holidayTypes = types.split(',').map(t => t.trim()).filter(Boolean);\n    } else if (Array.isArray(types)) {\n      this.holidayTypes = [...types];\n    } else {\n      this.holidayTypes = [...DEFAULT_HOLIDAY_TYPES];\n    }\n    \n    // Set includeAllTypes to false by default\n    this.includeAllTypes = false;\n    \n    // If the calendar is already rendered, update it\n    if (this.calendar) {\n      this.renderCalendar();\n    }\n  }\n  \n  /**\n   * Gets the current holiday types being displayed\n   */\n  getHolidayTypes(): string[] {\n    return [...this.holidayTypes];\n  }\n  \n  /**\n   * Checks if all types are being shown\n   */\n  isShowingAllTypes(): boolean {\n    return this.includeAllTypes;\n  }\n\n  /**\n   * Render the initial component HTML\n   */\n  private render(shadow: ShadowRoot) {\n    // Get button text from attributes or use defaults\n    const todayButtonText = this.getAttribute('today-button-text') || 'امروز';\n    const todayButtonClass = this.getAttribute('today-button-class') || '';\n    const tomorrowButtonText = this.getAttribute('tomorrow-button-text') || 'فردا';\n    const tomorrowButtonClass = this.getAttribute('tomorrow-button-class') || '';\n    \n    // Check visibility attributes (defaults to true if not specified)\n    const showMonthSelector = this.getAttribute('show-month-selector') !== 'false';\n    const showYearSelector = this.getAttribute('show-year-selector') !== 'false';\n    const showPrevButton = this.getAttribute('show-prev-button') !== 'false';\n    const showNextButton = this.getAttribute('show-next-button') !== 'false';\n    const showTodayButton = this.getAttribute('show-today-button') !== 'false';\n    const showTomorrowButton = this.getAttribute('show-tomorrow-button') !== 'false';\n    \n    // SVG for dropdown icon\n    const chevronSVG = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m6 9 6 6 6-6\"/></svg>`;\n    \n    shadow.innerHTML = `\n      <style>${styles}</style>\n      <div class=\"picker-container\">\n        <input type=\"text\" id=\"date-input\" readonly placeholder=\"انتخاب تاریخ\">\n        <div class=\"calendar\" id=\"calendar\">\n          <div class=\"header\">\n            ${showPrevButton ? `<button id=\"prev-month\" type=\"button\" class=\"nav-button prev\"></button>` : ''}\n            <div class=\"selectors-container\">\n              ${showMonthSelector ? `\n              <div class=\"custom-select month-select\" id=\"month-select-container\">\n                <button type=\"button\" class=\"select-trigger\" id=\"month-select-trigger\">\n                  <span id=\"month-select-value\"></span>\n                  <span class=\"select-icon\">${chevronSVG}</span>\n                </button>\n                <div class=\"select-content month-select-content\" id=\"month-select-content\"></div>\n              </div>\n              ` : ''}\n              ${showYearSelector ? `\n              <div class=\"custom-select year-select\" id=\"year-select-container\">\n                <button type=\"button\" class=\"select-trigger\" id=\"year-select-trigger\">\n                  <span id=\"year-select-value\"></span>\n                  <span class=\"select-icon\">${chevronSVG}</span>\n                </button>\n                <div class=\"select-content year-select-content\" id=\"year-select-content\"></div>\n              </div>\n              ` : ''}\n            </div>\n            ${showNextButton ? `<button id=\"next-month\" type=\"button\" class=\"nav-button next\"></button>` : ''}\n          </div>\n          <div class=\"day-names\" id=\"day-names\"></div>\n          <div class=\"days-wrapper\">\n            <div class=\"days\" id=\"days-container\"></div>\n          </div>\n          <div class=\"footer\">\n            ${showTodayButton ? `<button id=\"today-button\" type=\"button\" class=\"date-nav-button today-button ${todayButtonClass}\">${todayButtonText}</button>` : ''}\n            ${showTomorrowButton ? `<button id=\"tomorrow-button\" type=\"button\" class=\"date-nav-button tomorrow-button ${tomorrowButtonClass}\">${tomorrowButtonText}</button>` : ''}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  /**\n   * Toggle calendar visibility\n   */\n  toggleCalendar() {\n    // First close any open dropdowns\n    this.closeAllDropdowns();\n    \n    if (this.calendar.classList.contains(\"visible\")) {\n      // Hide calendar\n      this.calendar.classList.remove(\"visible\", \"position-bottom\", \"position-top\");\n    } else {\n      // Show calendar with position calculation\n      this.positionCalendar();\n      this.calendar.classList.add(\"visible\");\n    }\n  }\n\n  /**\n   * Calculate and set the optimal position for the calendar\n   */\n  private positionCalendar(): void {\n    if (!this.input || !this.calendar) return;\n    \n    // Reset position classes\n    this.calendar.classList.remove(\"position-bottom\", \"position-top\");\n    \n    // Get measurements without causing reflow\n    const inputRect = this.input.getBoundingClientRect();\n    const windowHeight = window.innerHeight;\n    \n    // Default to position-bottom (most common)\n    this.calendar.classList.add(\"position-bottom\");\n    \n    // Set display block but with visibility hidden to measure without showing\n    const originalVisibility = this.calendar.style.visibility;\n    const originalDisplay = this.calendar.style.display;\n    this.calendar.style.visibility = 'hidden';\n    this.calendar.style.display = 'block';\n    \n    // Now we can measure once display is set\n    const calendarHeight = this.calendar.offsetHeight;\n    \n    // Check if there's enough space below\n    const spaceBelow = windowHeight - inputRect.bottom;\n    if (spaceBelow < calendarHeight) {\n      // Not enough space below, check if there's more space above\n      const spaceAbove = inputRect.top;\n      if (spaceAbove > spaceBelow || spaceAbove >= calendarHeight) {\n        // Switch to position-top\n        this.calendar.classList.remove(\"position-bottom\");\n        this.calendar.classList.add(\"position-top\");\n      }\n    }\n    \n    // Restore original styles\n    this.calendar.style.visibility = originalVisibility;\n    this.calendar.style.display = originalDisplay;\n  }\n\n  /**\n   * Change to previous or next month\n   */\n  changeMonth(direction: number) {\n    // Prevent multiple transitions at once\n    if (this.isTransitioning) return;\n    this.isTransitioning = true;\n    \n    // Cache reference to calendar elements\n    const daysContainer = this.daysContainer;\n    \n    // Add transition class based on direction\n    const slideClass = direction > 0 ? 'slide-left' : 'slide-right';\n    daysContainer.classList.add(slideClass);\n    \n    // Update month and year values\n    this.jalaliMonth = Number(this.jalaliMonth) + direction;\n    if (this.jalaliMonth < 1) {\n      this.jalaliMonth = 12;\n      this.jalaliYear--;\n    } else if (this.jalaliMonth > 12) {\n      this.jalaliMonth = 1;\n      this.jalaliYear++;\n    }\n    \n    // Use requestAnimationFrame for better timing and smoother animation\n    requestAnimationFrame(() => {\n      // Set a timeout to actually update the calendar\n      setTimeout(() => {\n        // Update month/year selectors\n        this.updateMonthYearSelectors();\n        \n        // Clear days container and render new content\n        daysContainer.innerHTML = \"\";\n        this.renderCalendarContent();\n        \n        // Remove slide class after the animation duration\n        requestAnimationFrame(() => {\n          daysContainer.classList.remove(slideClass);\n          \n          // Set a brief timeout to ensure animation is truly done\n          setTimeout(() => {\n            this.isTransitioning = false;\n          }, 50);\n        });\n      }, 200); // Shorter than the CSS animation duration for better feel\n    });\n  }\n\n  /**\n   * Update the month and year selector UI elements\n   */\n  private updateMonthYearSelectors(): void {\n    if (!this.shadowRoot) return;\n    \n    const monthSelectValue = this.shadowRoot.getElementById(\"month-select-value\") as HTMLSpanElement;\n    const yearSelectValue = this.shadowRoot.getElementById(\"year-select-value\") as HTMLSpanElement;\n    \n    if (monthSelectValue) {\n      monthSelectValue.textContent = this.persianMonths[this.jalaliMonth - 1];\n    }\n    \n    if (yearSelectValue) {\n      yearSelectValue.textContent = this.jalaliYear.toString();\n    }\n    \n    // Update selected items in dropdowns\n    const monthItems = this.shadowRoot.querySelectorAll(\".month-select-content .select-item\");\n    monthItems.forEach(item => {\n      if (item.getAttribute(\"data-value\") === this.jalaliMonth.toString()) {\n        item.classList.add(\"selected\");\n      } else {\n        item.classList.remove(\"selected\");\n      }\n    });\n    \n    const yearItems = this.shadowRoot.querySelectorAll(\".year-select-content .select-item\");\n    yearItems.forEach(item => {\n      if (item.getAttribute(\"data-value\") === this.jalaliYear.toString()) {\n        item.classList.add(\"selected\");\n      } else {\n        item.classList.remove(\"selected\");\n      }\n    });\n  }\n\n  /**\n   * Render the calendar with current month/year\n   */\n  renderCalendar() {\n    if (!this.shadowRoot || !this.daysContainer) return;\n    \n    // Update month and year selectors\n    this.updateMonthYearSelectors();\n\n    // Clear previous days\n    this.daysContainer.innerHTML = \"\";\n\n    // Render the calendar content\n    this.renderCalendarContent();\n  }\n  \n  /**\n   * Renders the calendar content for the current month\n   */\n  private renderCalendarContent(): void {\n    if (!this.daysContainer) return;\n    \n    // Get first day of month and number of days\n    const firstDayOfMonth = PersianDate.getDayOfWeek(this.jalaliYear, this.jalaliMonth, 1);\n    const daysInMonth = PersianDate.getDaysInMonth(this.jalaliYear, this.jalaliMonth);\n    \n    // Get today's date for highlighting\n    const today = new Date();\n    const jalaliToday = PersianDate.gregorianToJalali(\n      today.getFullYear(), \n      today.getMonth() + 1, \n      today.getDate()\n    );\n    \n    // Adjust first day of month for Persian calendar (Saturday is first day of week)\n    const adjustedFirstDay = (firstDayOfMonth + 1) % 7;\n    \n    // Clear the container\n    this.daysContainer.innerHTML = \"\";\n    \n    // Add empty cells for days before the first day of month\n    for (let i = 0; i < adjustedFirstDay; i++) {\n      const emptyDay = document.createElement(\"div\");\n      emptyDay.classList.add(\"day\", \"empty\");\n      this.daysContainer.appendChild(emptyDay);\n    }\n\n    // Generate days of month\n    for (let i = 1; i <= daysInMonth; i++) {\n      const dayElement = document.createElement(\"div\");\n      dayElement.classList.add(\"day\");\n      dayElement.textContent = i.toString();\n      \n      // Add hover handler for tooltips\n      this.setupDayTooltips(dayElement);\n      \n      // Add click handler\n      this.setupDayClickHandler(dayElement, i);\n      \n      // Highlight today\n      if (this.jalaliYear === jalaliToday[0] && this.jalaliMonth === jalaliToday[1] && i === jalaliToday[2]) {\n        dayElement.classList.add(\"today\");\n      }\n      \n      // Highlight selected date\n      if (this.selectedDate && \n          this.jalaliYear === this.selectedDate[0] && \n          this.jalaliMonth === this.selectedDate[1] && \n          i === this.selectedDate[2]) {\n        dayElement.classList.add(\"selected\");\n      }\n      \n      // Add holiday information if enabled\n      if (this.showHolidays) {\n        this.addHolidayInfo(dayElement, i);\n      }\n      \n      this.daysContainer.appendChild(dayElement);\n    }\n  }\n\n  /**\n   * Set up tooltip handling for a day element\n   */\n  private setupDayTooltips(dayElement: HTMLElement): void {\n    // Add hover handler for desktop tooltips\n    dayElement.addEventListener(\"mouseenter\", () => {\n      const tooltip = dayElement.querySelector('.event-tooltip');\n      if (tooltip) {\n        tooltip.classList.add(\"tooltip-visible\");\n      }\n    });\n    \n    dayElement.addEventListener(\"mouseleave\", () => {\n      const tooltip = dayElement.querySelector('.event-tooltip');\n      if (tooltip) {\n        tooltip.classList.remove(\"tooltip-visible\");\n      }\n    });\n  }\n\n  /**\n   * Set up click handling for a day element\n   */\n  private setupDayClickHandler(dayElement: HTMLElement, day: number): void {\n    let lastTapTime = 0;\n    \n    dayElement.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      \n      const currentTime = new Date().getTime();\n      const tapLength = currentTime - lastTapTime;\n      \n      // Handle touch events differently\n      if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {\n        if (tapLength < 500 && tapLength > 0) {\n          // Double tap detected - show tooltip\n          const tooltip = dayElement.querySelector('.event-tooltip');\n          if (tooltip) {\n            const tooltips = this.shadowRoot?.querySelectorAll('.event-tooltip.tooltip-visible');\n            tooltips?.forEach(t => t.classList.remove(\"tooltip-visible\"));\n            tooltip.classList.add(\"tooltip-visible\");\n          }\n        } else {\n          // Single tap - select the date\n          this.selectDate(day);\n        }\n      } else {\n        // For non-mobile, just select the date\n        this.selectDate(day);\n      }\n      \n      lastTapTime = currentTime;\n    });\n  }\n\n  /**\n   * Add holiday information to a day element\n   */\n  private addHolidayInfo(dayElement: HTMLElement, day: number): void {\n    // Check if it's Friday (6th day in JavaScript's getDay, where 0 is Sunday)\n    const dayOfWeek = PersianDate.getDayOfWeek(this.jalaliYear, this.jalaliMonth, day);\n    if (dayOfWeek === 5) { // Friday\n      dayElement.classList.add(\"friday\");\n    }\n    \n    // Check if it's a holiday from events.json based on holiday types\n    if (EventUtils.isHoliday(this.jalaliMonth, day, this.holidayTypes, this.includeAllTypes)) {\n      dayElement.classList.add(\"holiday\");\n      \n      // Add tooltip with event titles\n      const events = EventUtils.getEvents(this.jalaliMonth, day, this.holidayTypes, this.includeAllTypes);\n      if (events.length > 0) {\n        const tooltip = this.createEventTooltip(events);\n        dayElement.appendChild(tooltip);\n      }\n    }\n  }\n\n  /**\n   * Create tooltip element for events\n   */\n  private createEventTooltip(events: any[]): HTMLElement {\n    const tooltip = document.createElement(\"div\");\n    tooltip.classList.add(\"event-tooltip\");\n    \n    events.forEach(event => {\n      const eventItem = document.createElement(\"div\");\n      eventItem.classList.add(\"event-item\");\n      \n      // Add 'holiday' class for holiday events\n      if (event.holiday) {\n        eventItem.classList.add(\"holiday\");\n      }\n      \n      // Add type label\n      const typeLabel = document.createElement(\"span\");\n      typeLabel.classList.add(\"event-type-label\");\n      typeLabel.textContent = event.type;\n      eventItem.appendChild(typeLabel);\n      \n      // Add event title\n      const titleSpan = document.createElement(\"span\");\n      titleSpan.textContent = event.title;\n      eventItem.appendChild(titleSpan);\n      \n      tooltip.appendChild(eventItem);\n    });\n    \n    return tooltip;\n  }\n\n  /**\n   * Navigate to a specific date (today or tomorrow)\n   */\n  private navigateToDate(dateToUse: Date): void {\n    // Convert to Jalali date\n    const jalaliDate = PersianDate.gregorianToJalali(\n      dateToUse.getFullYear(),\n      dateToUse.getMonth() + 1,\n      dateToUse.getDate()\n    );\n    \n    const previousYear = this.jalaliYear;\n    \n    // Update current view to the specified date's month/year\n    this.jalaliYear = jalaliDate[0];\n    this.jalaliMonth = jalaliDate[1];\n    \n    // If the year has changed, refresh the events\n    if (previousYear !== this.jalaliYear) {\n      EventUtils.refreshEvents();\n    }\n    \n    // Render the calendar with the new month/year\n    this.renderCalendar();\n    \n    // Select the date\n    this.selectDate(jalaliDate[2]);\n  }\n\n  /**\n   * Navigate to today's date and select it\n   */\n  private goToToday(): void {\n    this.navigateToDate(new Date());\n  }\n\n  /**\n   * Navigate to tomorrow's date and select it\n   */\n  private goToTomorrow(): void {\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    this.navigateToDate(tomorrow);\n  }\n\n  /**\n   * Select a specific date\n   */\n  selectDate(day: number) {\n    this.jalaliDay = day;\n    this.selectedDate = [this.jalaliYear, this.jalaliMonth, this.jalaliDay];\n    \n    // Format and display the date\n    this.formatAndSetValue();\n    \n    // Get all events for the selected date\n    const events = EventUtils.getEvents(this.jalaliMonth, day, this.holidayTypes, this.includeAllTypes);\n    \n    // Dispatch change event\n    this.dispatchEvent(new CustomEvent(\"change\", {\n      detail: {\n        jalali: this.selectedDate,\n        gregorian: PersianDate.jalaliToGregorian(this.jalaliYear, this.jalaliMonth, this.jalaliDay),\n        isHoliday: EventUtils.isHoliday(this.jalaliMonth, day, this.holidayTypes, this.includeAllTypes),\n        events: events\n      },\n      bubbles: true\n    }) as PersianDateChangeEvent);\n    \n    // Close any open dropdowns before hiding the calendar\n    this.closeAllDropdowns();\n    \n    this.toggleCalendar();\n    this.renderCalendar();\n  }\n\n  /**\n   * Format the selected date and set input value\n   */\n  private formatAndSetValue() {\n    if (!this.selectedDate) return;\n    \n    const format = this.getAttribute('format') || this.options.format || 'YYYY/MM/DD';\n    \n    let formattedDate = format\n      .replace('YYYY', this.selectedDate[0].toString())\n      .replace('MM', this.selectedDate[1].toString().padStart(2, '0'))\n      .replace('DD', this.selectedDate[2].toString().padStart(2, '0'));\n      \n    this.input.value = formattedDate;\n  }\n\n  /**\n   * Handle month change from dropdown\n   */\n  private handleMonthChange(month: number, monthName: string): void {\n    if (this.jalaliMonth === month) return;\n    \n    this.jalaliMonth = month;\n    this.renderCalendar();\n  }\n\n  /**\n   * Handle year change from dropdown\n   */\n  private handleYearChange(year: number): void {\n    if (this.jalaliYear === year) return;\n    \n    const previousYear = this.jalaliYear;\n    this.jalaliYear = year;\n    \n    // If the year has changed, refresh the events\n    if (previousYear !== year) {\n      EventUtils.refreshEvents();\n    }\n    \n    this.renderCalendar();\n  }\n\n  /**\n   * Sets the date value programmatically\n   */\n  public setValue(year: number, month: number, day: number): void {\n    this.selectedDate = [year, month, day];\n    this.jalaliYear = year;\n    this.jalaliMonth = month;\n    this.jalaliDay = day;\n    this.formatAndSetValue();\n    this.renderCalendar();\n  }\n\n  /**\n   * Gets the currently selected date as a tuple [year, month, day]\n   */\n  public getValue(): DateTuple | null {\n    return this.selectedDate ? [...this.selectedDate] : null;\n  }\n\n  /**\n   * Checks if the currently selected date is a holiday\n   */\n  public isSelectedDateHoliday(): boolean {\n    if (!this.selectedDate) return false;\n    return EventUtils.isHoliday(\n      this.selectedDate[1],\n      this.selectedDate[2],\n      this.holidayTypes,\n      this.includeAllTypes\n    );\n  }\n\n  /**\n   * Gets events for the currently selected date\n   */\n  public getSelectedDateEvents(): any[] {\n    if (!this.selectedDate) return [];\n    return [...EventUtils.getEvents(\n      this.selectedDate[1],\n      this.selectedDate[2],\n      this.holidayTypes,\n      this.includeAllTypes\n    )];\n  }\n\n  /**\n   * Clears the selected date\n   */\n  public clear(): void {\n    this.selectedDate = null;\n    this.input.value = '';\n    this.renderCalendar();\n  }\n\n  /**\n   * Initialize touch gesture support for the calendar\n   */\n  private initTouchGestures(): void {\n    if (!this.calendar || !this.shadowRoot) return;\n    \n    let startX: number = 0;\n    let startY: number = 0;\n    let isDragging: boolean = false;\n    const threshold = 20;\n    let touchStartTime: number = 0;\n    let isSwiping = false;\n    \n    // Helper for touch event handler setup - fixed type issues\n    const setupTouchHandler = <K extends keyof HTMLElementEventMap>(\n      element: HTMLElement | null, \n      eventType: K, \n      handler: (e: HTMLElementEventMap[K]) => void, \n      options?: AddEventListenerOptions\n    ): void => {\n      if (element) {\n        element.addEventListener(eventType, handler as EventListener, options);\n      }\n    };\n    \n    // Handle touch start\n    const handleTouchStart = (e: TouchEvent): void => {\n      if (!this.calendar?.classList.contains(\"visible\")) return;\n      \n      startX = e.touches[0].clientX;\n      startY = e.touches[0].clientY;\n      isDragging = false;\n      isSwiping = false;\n      touchStartTime = Date.now();\n      e.stopPropagation();\n    };\n    \n    // Handle touch move\n    const handleTouchMove = (e: TouchEvent): void => {\n      if (!this.calendar?.classList.contains(\"visible\")) return;\n      \n      const currentX = e.touches[0].clientX;\n      const currentY = e.touches[0].clientY;\n      const diffX = currentX - startX;\n      const diffY = currentY - startY;\n      \n      // If already swiping, prevent default\n      if (isSwiping) {\n        e.preventDefault();\n        return;\n      }\n      \n      // Detect horizontal swipe\n      if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > threshold) {\n        e.preventDefault();\n        isDragging = true;\n        isSwiping = true;\n      }\n    };\n    \n    // Handle touch end\n    const handleTouchEnd = (e: TouchEvent): void => {\n      if (!this.calendar?.classList.contains(\"visible\")) return;\n      \n      const wasSwiping = isSwiping;\n      isSwiping = false;\n      \n      const touchEndTime = Date.now();\n      const touchDuration = touchEndTime - touchStartTime;\n      \n      // Process if touch was quick or we detected dragging\n      if ((touchDuration < 300 || isDragging) && !this.isTransitioning) {\n        const endX = e.changedTouches[0].clientX;\n        const endY = e.changedTouches[0].clientY;\n        \n        const diffX = endX - startX;\n        const diffY = endY - startY;\n        \n        // Consider only significant horizontal movements\n        if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > threshold) {\n          // Determine direction based on RTL mode\n          const isRTL = getComputedStyle(this).getPropertyValue('--jdp-direction').trim() === 'rtl';\n          \n          if ((isRTL && diffX < 0) || (!isRTL && diffX > 0)) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.changeMonth(1); // Next month\n          } else if ((isRTL && diffX > 0) || (!isRTL && diffX < 0)) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.changeMonth(-1); // Previous month\n          }\n        }\n      }\n      \n      // Prevent click events if we were swiping\n      if (wasSwiping) {\n        e.preventDefault();\n      }\n    };\n    \n    // Handle touch cancel\n    const handleTouchCancel = (): void => {\n      isSwiping = false;\n      isDragging = false;\n    };\n    \n    // Set up calendar touch events\n    // Use explicit 'touchstart' type instead of string\n    this.calendar.addEventListener('touchstart', handleTouchStart as EventListener, { passive: true });\n    this.calendar.addEventListener('touchmove', handleTouchMove as EventListener, { passive: false });\n    this.calendar.addEventListener('touchend', handleTouchEnd as EventListener, { passive: false });\n    this.calendar.addEventListener('touchcancel', handleTouchCancel as EventListener);\n    \n    // Set up navigation button touch handlers\n    const prevMonthBtn = this.shadowRoot.getElementById(\"prev-month\");\n    const nextMonthBtn = this.shadowRoot.getElementById(\"next-month\");\n    \n    if (prevMonthBtn) {\n      prevMonthBtn.addEventListener('touchstart', (e: Event) => e.stopPropagation(), { passive: true });\n    }\n    \n    if (nextMonthBtn) {\n      nextMonthBtn.addEventListener('touchstart', (e: Event) => e.stopPropagation(), { passive: true });\n    }\n  }\n\n  /**\n   * Helper method to close all dropdowns\n   */\n  private closeAllDropdowns(): void {\n    if (!this.shadowRoot) return;\n    \n    const dropdowns = this.shadowRoot.querySelectorAll(\".select-content\");\n    dropdowns.forEach(dropdown => {\n      dropdown.classList.remove(\"open\");\n    });\n  }\n\n  /**\n   * Helper method to toggle dropdown visibility\n   */\n  private toggleDropdown(dropdown: HTMLElement | null): void {\n    if (!dropdown) return;\n    \n    // Check if this dropdown is already open\n    const isCurrentlyOpen = dropdown.classList.contains(\"open\");\n    \n    // Close all dropdowns\n    this.closeAllDropdowns();\n    \n    // If the dropdown wasn't open, open it now\n    // This creates a toggle effect\n    if (!isCurrentlyOpen) {\n      // Open the dropdown\n      dropdown.classList.add(\"open\");\n      \n      // Find the selected item in this dropdown and scroll to it\n      // Use requestAnimationFrame for better timing with rendering\n      requestAnimationFrame(() => {\n        const selectedItem = dropdown.querySelector(\".select-item.selected\") as HTMLElement;\n        if (selectedItem) {\n          // Calculate the optimal scroll position - center the selected item\n          const scrollTop = selectedItem.offsetTop - \n            (dropdown.clientHeight / 2) + (selectedItem.clientHeight / 2);\n          \n          // Apply the scroll position\n          dropdown.scrollTop = Math.max(0, scrollTop);\n        }\n      });\n    }\n  }\n}\n\n// Register the custom element with the browser\n// Note: This is intentionally commented out because registration is handled in index.ts\n// Uncomment if you need standalone registration without index.ts\n// if (typeof window !== 'undefined' && !customElements.get('persian-datepicker-element')) {\n//   customElements.define('persian-datepicker-element', PersianDatePickerElement);\n// }\n\n// Export the class for direct usage\n","// Import the custom element class\nimport { PersianDatePickerElement } from './persian-datepicker-element';\n// Import the utility class\nimport { PersianDate } from './persian-date';\n// Import types from types directory\nimport type { \n  PersianDatePickerElementOptions, \n  PersianDateChangeEvent,\n  DateTuple,\n  PersianEvent\n} from './types';\n\n// Declare global window interface extension for TypeScript\ndeclare global {\n  interface Window {\n    PersianDatePickerElement?: typeof PersianDatePickerElement;\n  }\n}\n\n// Try to register the custom element with the browser\n// First check if we're in a browser environment and if customElements API exists\nconst isBrowser = typeof window !== 'undefined';\nconst hasCustomElements = isBrowser && typeof customElements !== 'undefined';\n\nif (hasCustomElements) {\n  // Only register if it's not already registered\n  if (!customElements.get('persian-datepicker-element')) {\n    try {\n      customElements.define('persian-datepicker-element', PersianDatePickerElement);\n      console.info('persian-datepicker-element registered successfully');\n    } catch (error) {\n      console.error('Error registering persian-datepicker-element:', error);\n    }\n  }\n}\n\n// Export the classes and types\nexport { PersianDatePickerElement, PersianDate };\nexport type { \n  PersianDatePickerElementOptions, \n  PersianDateChangeEvent,\n  DateTuple,\n  PersianEvent\n};\n\n// Default export for convenient usage\nexport default PersianDatePickerElement; "],"names":[],"mappings":"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"}