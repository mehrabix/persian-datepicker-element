<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Persian Date Picker Element - Theme Switcher</title>
  <!-- Add Vazir Font from CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css">
  <style>
    body {
      font-family: 'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f8fafc;
      color: #1e293b;
      line-height: 1.5;
      direction: rtl;
      transition: background-color 0.3s, color 0.3s;
      /* Apply Persian numbers to all elements */
      -moz-font-feature-settings: "ss02";
      -webkit-font-feature-settings: "ss02";
      font-feature-settings: "ss02";
      font-weight: 400;
    }

    /* Apply Persian numbers to all elements */
    * {
      -moz-font-feature-settings: "ss02";
      -webkit-font-feature-settings: "ss02";
      font-feature-settings: "ss02";
    }

    body.dark {
      background-color: #0f172a;
      color: #e2e8f0;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    h1 {
      font-size: 28px;
      margin-bottom: 24px;
      color: #0f172a;
      text-align: center;
      transition: color 0.3s;
      font-weight: 700;
    }

    body.dark h1 {
      color: #f8fafc;
    }

    h2 {
      font-size: 20px;
      margin: 24px 0 16px;
      color: #334155;
      transition: color 0.3s;
      font-weight: 700;
    }

    body.dark h2 {
      color: #cbd5e1;
    }

    p {
      margin-bottom: 16px;
      color: #4b5563;
      transition: color 0.3s;
    }

    body.dark p {
      color: #94a3b8;
    }

    .theme-section {
      background-color: #fff;
      padding: 24px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    body.dark .theme-section {
      background-color: #1e293b;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    .theme-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 24px;
    }

    .control-group {
      margin-bottom: 20px;
    }

    .control-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #4b5563;
      transition: color 0.3s;
    }

    body.dark .control-group label {
      color: #e2e8f0;
    }

    .theme-btn {
      padding: 8px 16px;
      background-color: #f1f5f9;
      border: 2px solid transparent;
      border-radius: 4px;
      cursor: pointer;
      font-family: inherit;
      font-size: 14px;
      transition: all 0.2s;
      color: #1e293b;
    }

    .theme-btn:hover {
      background-color: #e2e8f0;
    }

    .theme-btn.active {
      border-color: #0891b2;
      background-color: #ecfeff;
      font-weight: 500;
    }

    body.dark .theme-btn {
      background-color: #334155;
      color: #e2e8f0;
    }

    body.dark .theme-btn:hover {
      background-color: #475569;
    }

    body.dark .theme-btn.active {
      border-color: #0891b2;
      background-color: #164e63;
    }

    .theme-toggle {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #cbd5e1;
      transition: .4s;
      border-radius: 24px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background-color: #0891b2;
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    .color-input {
      margin-bottom: 16px;
    }

    .color-input label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #4b5563;
      transition: color 0.3s;
    }

    body.dark .color-input label {
      color: #e2e8f0;
    }

    .radius-control {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
    }

    .radius-control label {
      font-weight: 500;
      color: #4b5563;
      transition: color 0.3s;
      min-width: 120px;
    }

    body.dark .radius-control label {
      color: #e2e8f0;
    }

    .radius-control input {
      flex-grow: 1;
    }

    .radius-control span {
      font-size: 14px;
      color: #64748b;
      min-width: 40px;
      text-align: right;
      transition: color 0.3s;
    }

    body.dark .radius-control span {
      color: #94a3b8;
    }

    .datepicker-container {
      margin-top: 24px;
    }

    persian-datepicker-element {
      width: 100%;
      display: block;
      --jdp-font-family: 'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      --jdp-font-feature-settings: "ss02";
      --jdp-font-weight: 400;
    }

    .result {
      margin-top: 20px;
      padding: 16px;
      background-color: #f1f5f9;
      border-radius: 6px;
      transition: background-color 0.3s;
    }

    body.dark .result {
      background-color: #1e1e2f;
    }

    .result p {
      margin: 8px 0;
    }

    .result strong {
      font-weight: 500;
      color: #0f172a;
      transition: color 0.3s;
    }

    body.dark .result strong {
      color: #e2e8f0;
    }

    .navigation {
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e2e8f0;
    }

    .navigation h2 {
      margin-top: 0;
    }

    .link {
      display: inline-block;
      margin-top: 20px;
      background-color: #0891b2;
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      text-decoration: none;
      font-weight: 500;
      transition: background-color 0.2s;
      margin-right: 8px;
      margin-bottom: 8px;
    }

    .link:hover {
      background-color: #0e7490;
    }

    body.dark .link {
      background-color: #0e7490;
    }

    body.dark .link:hover {
      background-color: #0891b2;
    }

    @media (prefers-color-scheme: dark) {
      .navigation {
        border-bottom-color: #334155;
      }
    }

    /* Make sure form elements also use Persian numbers */
    input, button, select, textarea {
      font-family: 'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      -moz-font-feature-settings: "ss02";
      -webkit-font-feature-settings: "ss02";
      font-feature-settings: "ss02";
      font-weight: 400;
    }

    /* Responsive design improvements */
    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }
      
      .container {
        padding: 1rem;
        max-width: 100%;
      }
      
      h1 {
        font-size: 1.8rem;
        margin-bottom: 1.5rem;
      }
      
      h2 {
        font-size: 1.5rem;
      }
      
      .navigation {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .nav-links {
        margin-bottom: 1rem;
        flex-wrap: wrap;
      }
      
      .nav-links .link {
        margin: 0 0.5rem 0.5rem 0;
        padding: 0.5rem 0.8rem;
        min-height: 44px;
        display: inline-flex;
        align-items: center;
      }
      
      .toggle-container {
        margin-top: 1rem;
        width: 100%;
      }
      
      .dark-mode-toggle {
        padding: 0.5rem 1rem;
        width: 100%;
      }
      
      .theme-section {
        padding: 1.5rem;
      }
      
      .theme-toggle {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
      }
      
      .theme-controls {
        flex-wrap: wrap;
        gap: 0.5rem;
      }
      
      .theme-btn {
        padding: 0.5rem;
        font-size: 0.9rem;
        min-height: 44px;
        flex: 1 0 calc(33% - 0.5rem);
      }
      
      .control-group {
        flex-direction: column;
      }
      
      .color-input {
        margin-bottom: 1rem;
        width: 100%;
      }
      
      .radius-control {
        width: 100%;
      }
    }
    
    @media (max-width: 480px) {
      h1 {
        font-size: 1.5rem;
      }
      
      .theme-btn {
        flex: 1 0 calc(50% - 0.5rem);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Persian Date Picker Element - Theme Switcher</h1>
    <p>این صفحه امکان تغییر ظاهر تقویم شمسی را به صورت آنی فراهم می‌کند. می‌توانید از تم‌های آماده استفاده کنید یا با تنظیم متغیرهای CSS، ظاهر دلخواه خود را ایجاد کنید.</p>

    <div class="navigation">
      <div class="nav-links">
        <a href="index.html" class="link">نمونه‌های پایه</a>
        <a href="customization.html" class="link">نمونه‌های استایل‌دهی</a>
        <a href="theme-switcher.html" class="link">تغییردهنده تم</a>
        <a href="theme-builder.html" class="link">سازنده کامل تم</a>
        <a href="../index.html" class="link">صفحه اصلی</a>
      </div>
    </div>

    <div class="theme-section">
      <div class="theme-toggle">
        <h2 style="margin: 0;">حالت تاریک</h2>
        <label class="switch">
          <input type="checkbox" id="theme-section-dark-toggle">
          <span class="slider"></span>
        </label>
      </div>
      
      <h2>انتخاب تم</h2>
      <div class="theme-controls">
        <button class="theme-btn active" data-theme="default">پیش‌فرض</button>
        <button class="theme-btn" data-theme="blue">آبی</button>
        <button class="theme-btn" data-theme="green">سبز</button>
        <button class="theme-btn" data-theme="purple">بنفش</button>
        <button class="theme-btn" data-theme="orange">نارنجی</button>
        <button class="theme-btn" data-theme="minimal">مینیمال</button>
      </div>
      
      <div class="control-group">
        <div class="color-input">
          <label for="primary-color">رنگ اصلی:</label>
        <input type="color" id="primary-color" value="#0891b2">
      </div>
      
        <div class="radius-control">
          <label for="border-radius">شعاع گوشه‌ها:</label>
          <input type="range" id="border-radius" min="0" max="20" value="8">
          <span id="radius-value">8px</span>
        </div>
      </div>
      
      <div class="datepicker-container">
        <persian-datepicker-element id="theme-datepicker" placeholder="تاریخ را انتخاب کنید"></persian-datepicker-element>
      </div>

      <div class="result">
        <p><strong>تاریخ انتخاب شده:</strong> <span id="selected-date">-</span></p>
      </div>
    </div>
    
    <div class="link-container" style="margin-top: 30px; text-align: center;">
      <a href="index.html" class="link">نمونه‌های پایه</a>
      <a href="customization.html" class="link">نمونه‌های استایل‌دهی</a>
      <a href="theme-builder.html" class="link">سازنده کامل تم</a>
      <a href="../index.html" class="link">صفحه اصلی</a>
    </div>
  </div>

  <script src="../../dist/persian-datepicker-element.min.js"></script>
  <script>
    // Dark mode toggle
    const themeSectionDarkToggle = document.getElementById('theme-section-dark-toggle');
    
    // Convert numbers to Persian digits
    function toPersianNum(num) {
      const persianDigits = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
      return num.toString().replace(/\d/g, x => persianDigits[x]);
    }
    
    // Check for saved dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark');
      themeSectionDarkToggle.checked = true;
      applyDarkMode(true);
    }
    
    // Toggle dark mode from theme section toggle
    themeSectionDarkToggle.addEventListener('change', () => {
      const isDarkMode = themeSectionDarkToggle.checked;
      document.body.classList.toggle('dark', isDarkMode);
      localStorage.setItem('darkMode', isDarkMode);
      applyDarkMode(isDarkMode);
    });

    // Function to apply dark mode changes
    function applyDarkMode(isDarkMode) {
      // Get the current active theme
      const activeThemeBtn = document.querySelector('.theme-btn.active');
      const activeThemeName = activeThemeBtn ? activeThemeBtn.getAttribute('data-theme') : 'default';
      const activeTheme = themes[activeThemeName] || themes.default;
      
      if (isDarkMode) {
        // Apply dark theme merged with the current theme
        applyTheme({...darkTheme, ...{
          '--jdp-primary': activeTheme['--jdp-primary'],
          '--jdp-primary-hover': activeTheme['--jdp-primary-hover'],
          '--jdp-border-radius': activeTheme['--jdp-border-radius'],
          '--jdp-input-border-radius': activeTheme['--jdp-input-border-radius'] || activeTheme['--jdp-border-radius'],
          '--jdp-day-cell-border-radius': activeTheme['--jdp-day-cell-border-radius'] || activeTheme['--jdp-border-radius'],
          '--jdp-nav-button-border-radius': activeTheme['--jdp-nav-button-border-radius'] || activeTheme['--jdp-border-radius'],
          '--jdp-input-border-width': activeTheme['--jdp-input-border-width'],
          '--jdp-font-family': activeTheme['--jdp-font-family'],
          '--jdp-font-feature-settings': activeTheme['--jdp-font-feature-settings']
        }});
      } else {
        // Revert to the current theme without dark mode
        applyTheme(activeTheme);
      }
    }

    // Format date with Persian digits
    function formatPersianDate(dateArray) {
      return toPersianNum(dateArray.join('/'));
    }
    
    // Elements
    const datepicker = document.getElementById('theme-datepicker');
    const darkModeToggle = document.getElementById('dark-mode-toggle');
    const themeButtons = document.querySelectorAll('.theme-btn');
    const primaryColorInput = document.getElementById('primary-color');
    const borderRadiusInput = document.getElementById('border-radius');
    const radiusValueDisplay = document.getElementById('radius-value');

    // Pre-defined themes
    const themes = {
      default: {
        '--jdp-primary': '#0891b2',
        '--jdp-primary-hover': '#0e7490',
        '--jdp-border-radius': '0.5rem',
        '--jdp-font-family': "'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",
        '--jdp-font-feature-settings': '"ss02"'
      },
      blue: {
        '--jdp-primary': '#3b82f6',
        '--jdp-primary-hover': '#2563eb',
        '--jdp-border-radius': '0.5rem',
        '--jdp-font-family': "'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",
        '--jdp-font-feature-settings': '"ss02"'
      },
      green: {
        '--jdp-primary': '#10b981',
        '--jdp-primary-hover': '#059669',
        '--jdp-border-radius': '0.5rem',
        '--jdp-font-family': "'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",
        '--jdp-font-feature-settings': '"ss02"'
      },
      purple: {
        '--jdp-primary': '#8b5cf6',
        '--jdp-primary-hover': '#7c3aed',
        '--jdp-border-radius': '0.5rem',
        '--jdp-font-family': "'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",
        '--jdp-font-feature-settings': '"ss02"'
      },
      orange: {
        '--jdp-primary': '#f97316',
        '--jdp-primary-hover': '#ea580c',
        '--jdp-border-radius': '0.5rem',
        '--jdp-font-family': "'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",
        '--jdp-font-feature-settings': '"ss02"'
      },
      minimal: {
        '--jdp-primary': '#000000',
        '--jdp-primary-hover': '#333333',
        '--jdp-border-radius': '2px',
        '--jdp-input-border-width': '1px',
        '--jdp-day-cell-border-radius': '0',
        '--jdp-nav-button-border-radius': '0',
        '--jdp-font-family': "'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",
        '--jdp-font-feature-settings': '"ss02"'
      }
    };

    // Dark mode theme
    const darkTheme = {
      '--jdp-background': '#1e1e2f',
      '--jdp-foreground': '#e2e8f0',
      '--jdp-muted': '#334155',
      '--jdp-muted-foreground': '#94a3b8',
      '--jdp-border': '#475569',
      '--jdp-input-border-color': '#475569',
      '--jdp-calendar-shadow': '0px 10px 30px -5px rgba(2, 6, 23, 0.5)',
      '--jdp-day-hover-bg': '#334155',
      '--jdp-font-family': "'Vazir', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif",
      '--jdp-font-feature-settings': '"ss02"'
    };

    // Apply theme to datepicker
    function applyTheme(themeValues) {
      Object.entries(themeValues).forEach(([property, value]) => {
        datepicker.style.setProperty(property, value);
      });
    }

    // Apply color to datepicker
    function applyColor(color) {
      // Convert the color to a darker shade for hover state
      const darkerColor = adjustColor(color, -15);
      
      datepicker.style.setProperty('--jdp-primary', color);
      datepicker.style.setProperty('--jdp-primary-hover', darkerColor);
      
      // Update color input to match
      primaryColorInput.value = color;
    }

    // Apply border radius to datepicker
    function applyRadius(radius) {
      const radiusValue = `${radius}px`;
      datepicker.style.setProperty('--jdp-border-radius', radiusValue);
      
      // Update radius display
      radiusValueDisplay.textContent = radiusValue;
    }

    // Helper function to adjust color brightness
    function adjustColor(color, amount) {
      return '#' + color.replace(/^#/, '').replace(/../g, color => 
        ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2)
      );
    }
    
    // Handle theme button clicks
    themeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        // Remove active class from all buttons
        themeButtons.forEach(b => b.classList.remove('active'));
        
        // Add active class to clicked button
        btn.classList.add('active');
        
        // Apply the selected theme
        const themeName = btn.getAttribute('data-theme');
        const selectedTheme = themes[themeName];
        
        if (selectedTheme) {
          // If dark mode is enabled, merge with dark theme properly
          if (themeSectionDarkToggle.checked) {
            applyTheme({...darkTheme, ...{
              '--jdp-primary': selectedTheme['--jdp-primary'],
              '--jdp-primary-hover': selectedTheme['--jdp-primary-hover'],
              '--jdp-border-radius': selectedTheme['--jdp-border-radius'],
              '--jdp-input-border-radius': selectedTheme['--jdp-input-border-radius'] || selectedTheme['--jdp-border-radius'],
              '--jdp-day-cell-border-radius': selectedTheme['--jdp-day-cell-border-radius'] || selectedTheme['--jdp-border-radius'],
              '--jdp-nav-button-border-radius': selectedTheme['--jdp-nav-button-border-radius'] || selectedTheme['--jdp-border-radius'],
              '--jdp-input-border-width': selectedTheme['--jdp-input-border-width'],
              '--jdp-font-family': selectedTheme['--jdp-font-family'],
              '--jdp-font-feature-settings': selectedTheme['--jdp-font-feature-settings']
            }});
          } else {
            applyTheme(selectedTheme);
          }
          
          // Update controls to match theme
          primaryColorInput.value = selectedTheme['--jdp-primary'];
          
          // Update radius input based on the theme
          const radiusValue = parseInt(selectedTheme['--jdp-border-radius']) || 0;
          borderRadiusInput.value = radiusValue;
          radiusValueDisplay.textContent = `${radiusValue}px`;
        }
      });
    });
    
    // Color input
    primaryColorInput.addEventListener('input', () => {
      applyColor(primaryColorInput.value);
    });

    // Border radius input
    borderRadiusInput.addEventListener('input', () => {
      applyRadius(borderRadiusInput.value);
    });

    // Handle date selection
    datepicker.addEventListener('change', event => {
      document.getElementById('selected-date').textContent = formatPersianDate(event.detail.jalali);
    });

    // Apply the default theme initially
    applyTheme(themes.default);
  </script>
</body>
</html> 